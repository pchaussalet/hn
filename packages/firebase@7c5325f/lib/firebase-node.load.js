montageDefine("7c5325f","lib/firebase-node",{dependencies:["_stream_writable","_stream_duplex","http","https","request","faye-websocket"],factory:function(require,exports,module){function n(t){return void 0!==t}function ba(){}function ca(t){t.Vb=function(){return t.nf?t.nf:t.nf=new t}}function da(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&t.splice!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||t.call!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&t.call===void 0)return"object";return e}function ea(t){return"array"==da(t)}function fa(t){var e=da(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"string"==typeof t}function ga(t){return"number"==typeof t}function ha(t){return"function"==da(t)}function ia(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function ja(t){return t.call.apply(t.bind,arguments)}function ka(t,e){if(!t)throw Error();if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,n),t.apply(e,a)}}return function(){return t.apply(e,arguments)}}function q(){return q=Function.prototype.bind&&-1!=(""+Function.prototype.bind).indexOf("native code")?ja:ka,q.apply(null,arguments)}function ma(t,e){function n(){}n.prototype=e.prototype,t.Zg=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Tg=function(t,n){for(var a=Array(arguments.length-2),i=2;arguments.length>i;i++)a[i-2]=arguments[i];return e.prototype[n].apply(t,a)}}function r(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function na(t,e){var n,a={};for(n in t)a[n]=e.call(void 0,t[n],n,t);return a}function oa(t,e){for(var n in t)if(!e.call(void 0,t[n],n,t))return!1;return!0}function pa(t){var e,n=0;for(e in t)n++;return n}function qa(t){for(var e in t)return e}function ra(t){var e,n=[],a=0;for(e in t)n[a++]=t[e];return n}function sa(t){var e,n=[],a=0;for(e in t)n[a++]=e;return n}function ta(t,e){for(var n in t)if(t[n]==e)return!0;return!1}function ua(t,e,n){for(var a in t)if(e.call(n,t[a],a,t))return a}function va(t,e){var n=ua(t,e,void 0);return n&&t[n]}function wa(t){for(var e in t)return!1;return!0}function xa(t){var e,n={};for(e in t)n[e]=t[e];return n}function za(t){for(var e,n,a=1;arguments.length>a;a++){n=arguments[a];for(e in n)t[e]=n[e];for(var i=0;ya.length>i;i++)e=ya[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Aa(a){if(a+="",/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function Ba(){this.Pd=void 0}function Ca(t,e,n){switch(typeof e){case"string":Da(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?e:"null");break;case"boolean":n.push(e);break;case"undefined":n.push("null");break;case"object":if(null==e){n.push("null");break}if(ea(e)){var a=e.length;n.push("[");for(var i="",s=0;a>s;s++)n.push(i),i=e[s],Ca(t,t.Pd?t.Pd.call(e,s+"",i):i,n),i=",";n.push("]");break}n.push("{"),a="";for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i=e[s],"function"!=typeof i&&(n.push(a),Da(s,n),n.push(":"),Ca(t,t.Pd?t.Pd.call(e,s,i):i,n),a=","));n.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof e)}}function Da(t,e){e.push('"',t.replace(Fa,function(t){if(t in Ea)return Ea[t];var e=t.charCodeAt(0),n="\\u";return 16>e?n+="000":256>e?n+="00":4096>e&&(n+="0"),Ea[t]=n+e.toString(16)}),'"')}function Ga(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^la()).toString(36)}function Ka(){this.Va=-1}function La(){this.Va=-1,this.Va=64,this.R=[],this.ie=[],this.Pf=[],this.Id=[],this.Id[0]=128;for(var t=1;this.Va>t;++t)this.Id[t]=0;this.$d=this.$b=0,this.reset()}function Ma(t,e,n){n||(n=0);var a=t.Pf;if(p(e))for(var i=0;16>i;i++)a[i]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(i=0;16>i;i++)a[i]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(i=16;80>i;i++){var s=a[i-3]^a[i-8]^a[i-14]^a[i-16];a[i]=4294967295&(s<<1|s>>>31)}e=t.R[0],n=t.R[1];for(var r,l=t.R[2],c=t.R[3],o=t.R[4],i=0;80>i;i++)40>i?20>i?(s=c^n&(l^c),r=1518500249):(s=n^l^c,r=1859775393):60>i?(s=n&l|c&(n|l),r=2400959708):(s=n^l^c,r=3395469782),s=4294967295&(e<<5|e>>>27)+s+o+r+a[i],o=c,c=l,l=4294967295&(n<<30|n>>>2),n=e,e=s;t.R[0]=4294967295&t.R[0]+e,t.R[1]=4294967295&t.R[1]+n,t.R[2]=4294967295&t.R[2]+l,t.R[3]=4294967295&t.R[3]+c,t.R[4]=4294967295&t.R[4]+o}function Ta(t,e){var n=Ua(t,e,void 0);return 0>n?null:p(t)?t.charAt(n):t[n]}function Ua(t,e,n){for(var a=t.length,i=p(t)?t.split(""):t,s=0;a>s;s++)if(s in i&&e.call(n,i[s],s,t))return s;return-1}function Va(t,e){var n=Na(t,e);n>=0&&u.splice.call(t,n,1)}function Wa(t,e){t.sort(e||Xa)}function Xa(t,e){return t>e?1:e>t?-1:0}function db(t,e){if(!fa(t))throw Error("encodeByteArray takes an array as a parameter");if(!bb){bb={},cb={};for(var n=0;65>n;n++)bb[n]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n),cb[n]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(n)}for(var n=e?cb:bb,a=[],i=0;t.length>i;i+=3){var s=t[i],r=t.length>i+1,l=r?t[i+1]:0,c=t.length>i+2,o=c?t[i+2]:0,h=s>>2,s=(3&s)<<4|l>>4,l=(15&l)<<2|o>>6,o=63&o;c||(o=64,r||(l=64)),a.push(n[h],n[s],n[l],n[o])}return a.join("")}function v(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function eb(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fb(t){var e={};return eb(t,function(t,n){e[t]=n}),e}function gb(t){var e=[];return eb(t,function(t,n){ea(n)?Oa(n,function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""}function hb(t){var e={};return t=t.replace(/^\?/,"").split("&"),Oa(t,function(t){t&&(t=t.split("="),e[t[0]]=t[1])}),e}function y(t,e,n,a){var i;if(e>a?i="at least "+e:a>n&&(i=0===n?"none":"no more than "+n),i)throw Error(t+" failed: Was called with "+a+(1===a?" argument.":" arguments.")+" Expects "+i+".")}function z(t,e,n){var a="";switch(e){case 1:a=n?"first":"First";break;case 2:a=n?"second":"Second";break;case 3:a=n?"third":"Third";break;case 4:a=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t=t+" failed: "+(a+" argument ")}function A(t,e,a,i){if((!i||n(a))&&!ha(a))throw Error(z(t,e,i)+"must be a valid function.")}function ib(t,e,a){if(n(a)&&(!ia(a)||null===a))throw Error(z(t,e,!0)+"must be a valid context object.")}function jb(t){return"undefined"!=typeof JSON&&n(JSON.parse)?JSON.parse(t):Aa(t)}function B(t){if("undefined"!=typeof JSON&&n(JSON.stringify))t=JSON.stringify(t);else{var e=[];Ca(new Ba,t,e),t=e.join("")}return t}function kb(){this.Rd=C}function lb(){}function nb(t,e,n){this.Mf=t,this.Ja=e,this.Hd=n}function rb(){this.qb=[]}function sb(t,e){for(var n=null,a=0;e.length>a;a++){var i=e[a],s=i.Yb();null===n||s.Z(n.Yb())||(t.qb.push(n),n=null),null===n&&(n=new tb(s)),n.add(i)}n&&t.qb.push(n)}function ub(t,e,n){sb(t,n),vb(t,function(t){return t.Z(e)})}function wb(t,e,n){sb(t,n),vb(t,function(t){return t.contains(e)||e.contains(t)})}function vb(t,e){for(var n=!0,a=0;t.qb.length>a;a++){var i=t.qb[a];if(i)if(i=i.Yb(),e(i)){for(var i=t.qb[a],s=0;i.rd.length>s;s++){var r=i.rd[s];if(null!==r){i.rd[s]=null;var l=r.Tb();xb&&yb("event: "+(""+r)),zb(l)}}t.qb[a]=null}else n=!1}n&&(t.qb=[])}function tb(t){this.qa=t,this.rd=[]}function D(t,e,n,a){this.type=t,this.Ia=e,this.Xa=n,this.Ge=a,this.Nd=void 0}function Ab(t){return new D(Bb,t)}function Cb(t,e,n,a){this.qe=e,this.Ud=n,this.Nd=a,this.qd=t}function Db(t,e,n){this.qe=t,this.error=e,this.path=n}function pb(t,e,n){this.B=t,this.$=e,this.Sb=n}function Eb(t){return t.$}function ob(t,e){return t.$&&!t.Sb||t.B.Ga(e)}function Fb(t){this.$f=t,this.zd=null}function Gb(t,e){this.If={},this.Wd=new Fb(t),this.ca=e;var n=1e4+2e4*Math.random();setTimeout(q(this.Cf,this),Math.floor(n))}function Hb(){this.Bc={}}function Ib(t,e,a){n(a)||(a=1),v(t.Bc,e)||(t.Bc[e]=0),t.Bc[e]+=a}function Lb(t){return t=""+t,Jb[t]||(Jb[t]=new Hb),Jb[t]}function Mb(t,e){var n=""+t;return Kb[n]||(Kb[n]=e()),Kb[n]}function E(t,e){this.name=t,this.S=e}function Nb(t,e){return new E(t,e)}function Ob(t,e){return Pb(t.name,e.name)}function Qb(t,e){return Pb(t,e)}function Rb(t,e,n){this.type=Sb,this.source=t,this.path=e,this.Ha=n}function Tb(t,e){this.type=Ub,this.source=Vb,this.path=t,this.Qe=e}function Wb(t,e){this.type=Xb,this.source=t,this.path=e}function Yb(t,e){this.Ka=t,this.xa=e?e:Zb}function $b(t,e){for(var n,a=t.xa,i=null;!a.e();){if(n=t.Ka(e,a.key),0===n){if(a.left.e())return i?i.key:null;for(a=a.left;!a.right.e();)a=a.right;return a.key}0>n?a=a.left:n>0&&(i=a,a=a.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function ac(t,e,n,a,i){for(this.Qd=i||null,this.Ae=a,this.Oa=[],i=1;!t.e();)if(i=e?n(t.key,e):1,a&&(i*=-1),0>i)t=this.Ae?t.left:t.right;else{if(0===i){this.Oa.push(t);break}this.Oa.push(t),t=this.Ae?t.right:t.left}}function H(t){if(0===t.Oa.length)return null;var e,n=t.Oa.pop();if(e=t.Qd?t.Qd(n.key,n.value):{key:n.key,value:n.value},t.Ae)for(n=n.left;!n.e();)t.Oa.push(n),n=n.right;else for(n=n.right;!n.e();)t.Oa.push(n),n=n.left;return e}function bc(t){if(0===t.Oa.length)return null;var e;return e=t.Oa,e=e[e.length-1],t.Qd?t.Qd(e.key,e.value):{key:e.key,value:e.value}}function cc(t,e,n,a,i){this.key=t,this.value=e,this.color=null!=n?n:!0,this.left=null!=a?a:Zb,this.right=null!=i?i:Zb}function dc(t){return t.left.e()?t:dc(t.left)}function fc(t){return t.left.e()?Zb:(t.left.fa()||t.left.left.fa()||(t=gc(t)),t=t.X(null,null,null,fc(t.left),null),ec(t))}function ec(t){return t.right.fa()&&!t.left.fa()&&(t=jc(t)),t.left.fa()&&t.left.left.fa()&&(t=hc(t)),t.left.fa()&&t.right.fa()&&(t=ic(t)),t}function gc(t){return t=ic(t),t.right.left.fa()&&(t=t.X(null,null,null,null,hc(t.right)),t=jc(t),t=ic(t)),t}function jc(t){return t.right.X(null,null,t.color,t.X(null,null,!0,null,t.right.left),null)}function hc(t){return t.left.X(null,null,t.color,null,t.X(null,null,!0,t.left.right,null))}function ic(t){return t.X(null,null,!t.color,t.left.X(null,null,!t.left.color,null,null),t.right.X(null,null,!t.right.color,null,null))}function kc(){}function lc(t,e){return t&&"object"==typeof t?(I(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}function mc(t,e){var n=new nc;return oc(t,new K(""),function(t,a){n.lc(t,pc(a,e))}),n}function pc(t,e){var n,a=t.A().K(),a=lc(a,e);if(t.N()){var i=lc(t.Ba(),e);return i!==t.Ba()||a!==t.A().K()?new qc(i,L(a)):t}return n=t,a!==t.A().K()&&(n=n.da(new qc(a))),t.U(M,function(t,a){var i=pc(a,e);i!==a&&(n=n.Q(t,i))}),n}function K(t,e){if(1==arguments.length){this.o=t.split("/");for(var n=0,a=0;this.o.length>a;a++)this.o[a].length>0&&(this.o[n]=this.o[a],n++);this.o.length=n,this.Y=0}else this.o=t,this.Y=e}function N(t,e){var n=O(t);if(null===n)return e;if(n===O(e))return N(G(t),G(e));throw Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function O(t){return t.Y>=t.o.length?null:t.o[t.Y]}function rc(t){return t.o.length-t.Y}function G(t){var e=t.Y;return t.o.length>e&&e++,new K(t.o,e)}function sc(t){return t.Y<t.o.length?t.o[t.o.length-1]:null}function tc(t,e){this.Pa=t.slice(),this.Da=Math.max(1,this.Pa.length),this.ef=e;for(var n=0;this.Pa.length>n;n++)this.Da+=uc(this.Pa[n]);vc(this)}function vc(t){if(t.Da>768)throw Error(t.ef+"has a key path longer than 768 bytes ("+t.Da+").");if(t.Pa.length>32)throw Error(t.ef+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wc(t))}function wc(t){return 0==t.Pa.length?"":"in property '"+t.Pa.join(".")+"'"}function xc(){this.vc={}}function yc(t){this.Cc=t,this.Md="firebase:"}function zc(t){try{if("undefined"!=typeof window&&window[t]!==void 0){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yc(e)}}catch(n){}return new xc}function Cc(t,e,n,a,i){this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.ib=e,this.yb=n,this.Rg=a,this.Ld=i||"",this.Na=Ac.get("host:"+t)||this.host}function Dc(t,e){e!==t.Na&&(t.Na=e,"s-"===t.Na.substr(0,2)&&Ac.set("host:"+t.host,t.Na))}function I(t,e){if(!t)throw Fc(e)}function Fc(t){return Error("Firebase (2.2.3) INTERNAL ASSERT FAILED: "+t)}function Gc(t){try{return new Buffer(t,"base64").toString("utf8")}catch(e){yb("base64Decode failed: ",e)}return null}function Hc(t){var e=Ic(t);t=new La,t.update(e);var e=[],n=8*t.$d;56>t.$b?t.update(t.Id,56-t.$b):t.update(t.Id,t.Va-(t.$b-56));for(var a=t.Va-1;a>=56;a--)t.ie[a]=255&n,n/=256;for(Ma(t,t.ie),a=n=0;5>a;a++)for(var i=24;i>=0;i-=8)e[n]=255&t.R[a]>>i,++n;return db(e)}function Jc(){for(var t="",e=0;arguments.length>e;e++)t=fa(arguments[e])?t+Jc.apply(null,arguments[e]):"object"==typeof arguments[e]?t+B(arguments[e]):t+arguments[e],t+=" ";return t}function yb(){if(!0===Kc&&(Kc=!1,null===xb&&!0===Bc.get("logging_enabled")&&Lc(!0)),xb){var t=Jc.apply(null,arguments);xb(t)}}function Mc(t){return function(){yb(t,arguments)}}function Nc(){if("undefined"!=typeof console){var t="FIREBASE INTERNAL ERROR: "+Jc.apply(null,arguments);console.error!==void 0?console.error(t):console.log(t)}}function Oc(){var t=Jc.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+t)}function P(){if("undefined"!=typeof console){var t="FIREBASE WARNING: "+Jc.apply(null,arguments);console.warn!==void 0?console.warn(t):console.log(t)}}function Pc(t){var e="",n="",a="",i="",s=!0,r="https",l=443;if(p(t)){var c=t.indexOf("//");for(c>=0&&(r=t.substring(0,c-1),t=t.substring(c+2)),c=t.indexOf("/"),-1===c&&(c=t.length),e=t.substring(0,c),i="",t=t.substring(c).split("/"),c=0;t.length>c;c++)if(t[c].length>0){var o=t[c];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(h){}i+="/"+o}t=e.split("."),3===t.length?(n=t[1],a=t[0].toLowerCase()):2===t.length&&(n=t[0]),c=e.indexOf(":"),c>=0&&(s="https"===r||"wss"===r,l=e.substring(c+1),isFinite(l)&&(l+=""),l=p(l)?/^\s*-?0x/i.test(l)?parseInt(l,16):parseInt(l,10):0/0)}return{host:e,port:l,domain:n,Ng:a,ib:s,scheme:r,ic:i}}function Qc(t){return ga(t)&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)}function Rc(t){t()}function Pb(t,e){if(t===e)return 0;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return-1;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return 1;var n=Sc(t),a=Sc(e);return null!==n?null!==a?0==n-a?t.length-e.length:n-a:-1:null!==a?1:e>t?-1:1}function Tc(t,e){if(e&&t in e)return e[t];throw Error("Missing required key ("+t+") in object: "+B(e))}function Uc(t){if("object"!=typeof t||null===t)return B(t);var e,n=[];for(e in t)n.push(e);n.sort(),e="{";for(var a=0;n.length>a;a++)0!==a&&(e+=","),e+=B(n[a]),e+=":",e+=Uc(t[n[a]]);return e+"}"}function Vc(t,e){if(e>=t.length)return[t];for(var n=[],a=0;t.length>a;a+=e)a+e>t?n.push(t.substring(a,t.length)):n.push(t.substring(a,a+e));return n}function Wc(t,e){if(ea(t))for(var n=0;t.length>n;++n)e(n,t[n]);else r(t,e)}function Xc(t){I(!Qc(t),"Invalid JSON number");var e,n,a,i;for(0===t?(a=n=0,e=-1/0===1/t?1:0):(e=0>t,t=Math.abs(t),t>=Math.pow(2,-1022)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),n=a+1023,a=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(n=0,a=Math.round(t/Math.pow(2,-1074)))),i=[],t=52;t;--t)i.push(a%2?1:0),a=Math.floor(a/2);for(t=11;t;--t)i.push(n%2?1:0),n=Math.floor(n/2);for(i.push(e?1:0),i.reverse(),e=i.join(""),n="",t=0;64>t;t+=8)a=parseInt(e.substr(t,8),2).toString(16),1===a.length&&(a="0"+a),n+=a;return n.toLowerCase()}function Sc(t){return Yc.test(t)&&(t=Number(t),t>=-2147483648&&2147483647>=t)?t:null}function zb(t){try{t()}catch(e){setTimeout(function(){throw P("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}}function Q(t){if(ha(t)){var e=Array.prototype.slice.call(arguments,1).slice();zb(function(){t.apply(null,e)})}}function Ic(t){for(var e=[],n=0,a=0;t.length>a;a++){var i=t.charCodeAt(a);i>=55296&&56319>=i&&(i-=55296,a++,I(t.length>a,"Surrogate pair missing trail surrogate."),i=65536+(i<<10)+(t.charCodeAt(a)-56320)),128>i?e[n++]=i:(2048>i?e[n++]=192|i>>6:(65536>i?e[n++]=224|i>>12:(e[n++]=240|i>>18,e[n++]=128|63&i>>12),e[n++]=128|63&i>>6),e[n++]=128|63&i)}return e}function uc(t){for(var e=0,n=0;t.length>n;n++){var a=t.charCodeAt(n);128>a?e++:2048>a?e+=2:a>=55296&&56319>=a?(e+=4,n++):e+=3}return e}function Zc(t){var e={},n={},a={},i="";try{var s=t.split("."),e=jb(Gc(s[0])||""),n=jb(Gc(s[1])||""),i=s[2],a=n.d||{};delete n.d}catch(r){}return{Wg:e,zc:n,data:a,Kg:i}}function $c(t){return t=Zc(t).zc,"object"==typeof t&&t.hasOwnProperty("iat")?w(t,"iat"):null}function ad(t){t=Zc(t);var e=t.zc;return!!t.Kg&&!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}function bd(t){this.V=t,this.g=t.n.g}function cd(t,e,n,a){var i=[],s=[];return Oa(e,function(e){"child_changed"===e.type&&t.g.wd(e.Ge,e.Ia)&&s.push(new D("child_moved",e.Ia,e.Xa))}),dd(t,i,"child_removed",e,a,n),dd(t,i,"child_added",e,a,n),dd(t,i,"child_moved",s,a,n),dd(t,i,"child_changed",e,a,n),dd(t,i,Bb,e,a,n),i}function dd(t,e,n,a,i,s){a=Pa(a,function(t){return t.type===n}),Wa(a,q(t.bg,t)),Oa(a,function(n){var a=ed(t,n,s);Oa(i,function(i){i.Ef(n.type)&&e.push(i.createEvent(a,t.V))})})}function ed(t,e,n){return"value"!==e.type&&"child_removed"!==e.type&&(e.Nd=n.kf(e.Xa,e.Ia,t.g)),e}function fd(){this.bb={}}function gd(t,e){var n=e.type,a=e.Xa;I("child_added"==n||"child_changed"==n||"child_removed"==n,"Only child changes supported for tracking"),I(".priority"!==a,"Only non-priority child changes can be tracked.");var i=w(t.bb,a);if(i){var s=i.type;if("child_added"==n&&"child_removed"==s)t.bb[a]=new D("child_changed",e.Ia,a,i.Ia);else if("child_removed"==n&&"child_added"==s)delete t.bb[a];else if("child_removed"==n&&"child_changed"==s)t.bb[a]=new D("child_removed",i.Ge,a);else if("child_changed"==n&&"child_added"==s)t.bb[a]=new D("child_added",e.Ia,a);else{if("child_changed"!=n||"child_changed"!=s)throw Fc("Illegal combination of changes: "+e+" occurred after "+i);t.bb[a]=new D("child_changed",e.Ia,a,i.Ge)}}else t.bb[a]=e}function hd(t,e,n){this.Mb=t,this.nb=e,this.pb=n||null}function id(t,e,n){this.ga=t,this.nb=e,this.pb=n}function jd(t){this.g=t}function kd(t){this.xe=new jd(t.g),this.g=t.g;var e;t.la?(e=ld(t),e=t.g.Mc(md(t),e)):e=t.g.Qc(),this.cd=e,t.na?(e=nd(t),t=t.g.Mc(od(t),e)):t=t.g.Nc(),this.Dc=t}function pd(t){this.ra=new kd(t),this.g=t.g,I(t.ia,"Only valid if limit has been set"),this.ja=t.ja,this.Fb=!qd(t)}function rd(t,e,n,a,i,s){var r;if(t.Fb){var l=td(t.g);r=function(t,e){return l(e,t)}}else r=td(t.g);I(e.zb()==t.ja,"");var c=new E(n,a),o=t.Fb?ud(e,t.g):vd(e,t.g),h=t.ra.matches(c);if(e.Ga(n)){var p=e.M(n),o=i.ue(t.g,o,t.Fb);return null!=o&&o.name==n&&(o=i.ue(t.g,o,t.Fb)),i=null==o?1:r(o,c),h&&!a.e()&&i>=0?(null!=s&&gd(s,new D("child_changed",a,n,p)),e.Q(n,a)):(null!=s&&gd(s,new D("child_removed",p,n)),e=e.Q(n,C),null!=o&&t.ra.matches(o)?(null!=s&&gd(s,new D("child_added",o.S,o.name)),e.Q(o.name,o.S)):e)}return a.e()?e:h&&r(o,c)>=0?(null!=s&&(gd(s,new D("child_removed",o.S,o.name)),gd(s,new D("child_added",a,n))),e.Q(n,a).Q(o.name,C)):e}function wd(t,e){this.ee=t,this.Zf=e}function xd(t){this.I=t}function Fd(t,e,n,a,i,s){var r=e.D;if(null!=a.rc(n))return e;var l;if(n.e())I(Eb(e.u()),"If change path is empty, we must have complete server data"),e.u().Sb?(i=qb(e),a=a.wc(i instanceof S?i:C)):a=a.ua(qb(e)),s=t.I.ta(e.D.j(),a,s);else{var c=O(n);if(".priority"==c)I(1==rc(n),"Can't have a priority with additional path components"),s=r.j(),l=e.u().j(),a=a.gd(n,s,l),s=null!=a?t.I.da(s,a):r.j();else{var o=G(n);ob(r,c)?(l=e.u().j(),a=a.gd(n,r.j(),l),a=null!=a?r.j().M(c).G(o,a):r.j().M(c)):a=a.Wa(c,e.u()),s=null!=a?t.I.G(r.j(),c,a,i,s):r.j()}}return Dd(e,s,r.$||n.e(),t.I.Fa())}function zd(t,e,n,a,i,s,r,l){var c=e.u();if(r=r?t.I:t.I.Ub(),n.e())a=r.ta(c.j(),a,null);else if(r.Fa()&&!c.Sb)a=c.j().G(n,a),a=r.ta(c.j(),a,null);else{var o=O(n);if((n.e()?!c.$||c.Sb:!ob(c,O(n)))&&rc(n)>1)return e;a=c.j().M(o).G(G(n),a),a=".priority"==o?r.da(c.j(),a):r.G(c.j(),o,a,mb,null)}return c=c.$||n.e(),e=new Gd(e.D,new pb(a,c,r.Fa())),Fd(t,e,n,i,new nb(i,e,s),l)}function yd(t,e,n,a,i,s,r){var l=e.D;if(i=new nb(i,e,s),n.e())r=t.I.ta(e.D.j(),a,r),t=Dd(e,r,!0,t.I.Fa());else if(s=O(n),".priority"===s)r=t.I.da(e.D.j(),a),t=Dd(e,r,l.$,l.Sb);else{var c=G(n);if(n=l.j().M(s),!c.e()){var o=i.jf(s);a=null!=o?".priority"===sc(c)&&o.oa(c.parent()).e()?o:o.G(c,a):C}n.Z(a)?t=e:(r=t.I.G(l.j(),s,a,i,r),t=Dd(e,r,l.$,t.I.Fa()))}return t}function Bd(t,e,n,a,i,s,r){var l=e;return Id(a,function(a,c){var o=n.w(a);ob(e.D,O(o))&&(l=yd(t,l,o,c,i,s,r))}),Id(a,function(a,c){var o=n.w(a);ob(e.D,O(o))||(l=yd(t,l,o,c,i,s,r))}),l}function Jd(t,e){return Id(e,function(e,n){t=t.G(e,n)}),t}function Cd(t,e,n,a,i,s,r,l){if(e.u().j().e()&&!Eb(e.u()))return e;var c=e;n=n.e()?a:Kd(Ld,n,a);var o=e.u().j();return n.children.ha(function(n,a){if(o.Ga(n)){var h=e.u().j().M(n),h=Jd(h,a);c=zd(t,c,new K(n),h,i,s,r,l)}}),n.children.ha(function(n,a){var h=!Eb(e.u())&&null==a.value;o.Ga(n)||h||(h=e.u().j().M(n),h=Jd(h,a),c=zd(t,c,new K(n),h,i,s,r,l))}),c}function Ed(t,e,n,a,i,s){if(null!=a.rc(n))return e;var r=new nb(a,e,i),l=i=e.D.j();if(Eb(e.u())){if(n.e())i=a.ua(qb(e)),l=t.I.ta(e.D.j(),i,s);else if(".priority"===O(n)){var c=a.Wa(O(n),e.u());null==c||i.e()||i.A().Z(c)||(l=t.I.da(i,c))}else c=O(n),i=a.Wa(c,e.u()),null!=i&&(l=t.I.G(e.D.j(),c,i,r,s));i=!0}else e.D.$||n.e()?(l=i,i=e.D.j(),i.N()||i.U(M,function(n){var i=a.Wa(n,e.u());null!=i&&(l=t.I.G(l,n,i,r,s))}),i=e.D.$):(c=O(n),(1==rc(n)||ob(e.D,c))&&(n=a.Wa(c,e.u()),null!=n&&(l=t.I.G(i,c,n,r,s))),i=!1);return Dd(e,l,i,t.I.Fa())}function Md(){}function td(t){return q(t.compare,t)}function Pd(t){this.bc=t}function Rd(){}function Sd(){}function Ud(){}function Xd(){this.Qb=this.na=this.Ib=this.la=this.ia=!1,this.ja=0,this.Kb="",this.dc=null,this.tb="",this.ac=null,this.rb="",this.g=M}function qd(t){return""===t.Kb?t.la:"l"===t.Kb}function md(t){return I(t.la,"Only valid if start has been set"),t.dc}function ld(t){return I(t.la,"Only valid if start has been set"),t.Ib?t.tb:"[MIN_NAME]"}function od(t){return I(t.na,"Only valid if end has been set"),t.ac}function nd(t){return I(t.na,"Only valid if end has been set"),t.Qb?t.rb:"[MAX_NAME]"}function Zd(t){var e=new Xd;return e.ia=t.ia,e.ja=t.ja,e.la=t.la,e.dc=t.dc,e.Ib=t.Ib,e.tb=t.tb,e.na=t.na,e.ac=t.ac,e.Qb=t.Qb,e.rb=t.rb,e.g=t.g,e}function $d(t,e){var n=Zd(t);return n.g=e,n}function ae(t){var e={};if(t.la&&(e.sp=t.dc,t.Ib&&(e.sn=t.tb)),t.na&&(e.ep=t.ac,t.Qb&&(e.en=t.rb)),t.ia){e.l=t.ja;var n=t.Kb;""===n&&(n=qd(t)?"l":"r"),e.vf=n}return t.g!==M&&(e.i=""+t.g),e}function be(t){return!(t.la||t.na||t.ia)}function ce(t){var e={};if(be(t)&&t.g==M)return e;var n;return t.g===M?n="$priority":t.g===Wd?n="$value":(I(t.g instanceof Pd,"Unrecognized index type!"),n=""+t.g),e.orderBy=B(n),t.la&&(e.startAt=B(t.dc),t.Ib&&(e.startAt+=","+B(t.tb))),t.na&&(e.endAt=B(t.ac),t.Qb&&(e.endAt+=","+B(t.rb))),t.ia&&(qd(t)?e.limitToFirst=t.ja:e.limitToLast=t.ja),e}function de(t,e){this.xd=t,this.cc=e}function ee(t,e,n){var a=na(t.xd,function(a,i){var s=w(t.cc,i);if(I(s,"Missing index implementation for "+i),a===Nd){if(s.Fc(e.S)){for(var r=[],l=n.Wb(Nb),c=H(l);c;)c.name!=e.name&&r.push(c),c=H(l);return r.push(e),fe(r,td(s))}return Nd}return s=n.get(e.name),r=a,s&&(r=r.remove(new E(e.name,s))),r.Ma(e,e.S)});return new de(a,t.cc)}function ge(t,e,n){var a=na(t.xd,function(t){if(t===Nd)return t;var a=n.get(e.name);return a?t.remove(new E(e.name,a)):t});return new de(a,t.cc)}function qc(t,e){this.C=t,I(n(this.C)&&null!==this.C,"LeafNode shouldn't be created with null/undefined value."),this.ba=e||C,ie(this.ba),this.xb=null}function S(t,e,n){this.m=t,(this.ba=e)&&ie(this.ba),t.e()&&I(!this.ba||this.ba.e(),"An empty node cannot have a priority"),this.sb=n,this.xb=null}function ud(t,e){var n;return n=(n=me(t,e))?(n=n.Pc())&&n.name:t.m.Pc(),n?new E(n,t.m.get(n)):null}function vd(t,e){var n;return n=(n=me(t,e))?(n=n.ec())&&n.name:t.m.ec(),n?new E(n,t.m.get(n)):null}function me(t,e){return e===Td?null:t.sb.get(""+e)}function L(t,e){if(null===t)return C;var n=null;if("object"==typeof t&&".priority"in t?n=t[".priority"]:e!==void 0&&(n=e),I(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new qc(t,L(n));if(t instanceof Array){var a=C,i=t;return r(i,function(t,e){if(v(i,e)&&"."!==e.substring(0,1)){var n=L(t);(n.N()||!n.e())&&(a=a.Q(e,n))}}),a.da(L(n))}var s=[],l=!1,c=t;if(eb(c,function(t){if("string"!=typeof t||"."!==t.substring(0,1)){var e=L(c[t]);e.e()||(l=l||!e.A().e(),s.push(new E(t,e)))}}),0==s.length)return C;var o=fe(s,Ob,function(t){return t.name},Qb);if(l){var h=fe(s,td(M));return new S(o,L(n),new de({".priority":h},{".priority":M}))}return new S(o,L(n),he)}function oe(t){this.count=parseInt(Math.log(t+1)/ne,10),this.cf=this.count-1,this.Yf=t+1&parseInt(Array(this.count+1).join("1"),2)}function pe(t){var e=!(t.Yf&1<<t.cf);return t.cf--,e}function fe(t,e,n,a){function i(e,a){var s=a-e;if(0==s)return null;if(1==s){var r=t[e],l=n?n(r):r;return new cc(l,r.S,!1,null,null)}var r=parseInt(s/2,10)+e,s=i(e,r),c=i(r+1,a),r=t[r],l=n?n(r):r;return new cc(l,r.S,!1,s,c)}t.sort(e);var s=function(e){function a(e,a){var c=l-e,o=l;l-=e;var o=i(c+1,o),c=t[c],h=n?n(c):c,o=new cc(h,c.S,a,null,o);s?s.left=o:r=o,s=o}for(var s=null,r=null,l=t.length,c=0;e.count>c;++c){var o=pe(e),h=Math.pow(2,e.count-(c+1));o?a(h,!1):(a(h,!1),a(h,!0))}return r}(new oe(t.length));return null!==s?new Yb(a||e,s):new Yb(a||e)}function je(t){return"number"==typeof t?"number:"+Xc(t):"string:"+t}function ie(t){if(t.N()){var e=t.K();I("string"==typeof e||"number"==typeof e||"object"==typeof e&&v(e,".sv"),"Priority must be a string or number.")}else I(t===Qd||t.e(),"priority of unexpected type.");I(t===Qd||t.A().e(),"Priority nodes can't have a priority of their own.")}function qe(){S.call(this,new Yb(Qb),C,he)}function Gd(t,e){this.D=t,this.Sd=e}function Dd(t,e,n,a){return new Gd(new pb(e,n,a),t.Sd)}function Hd(t){return t.D.$?t.D.j():null}function qb(t){return t.Sd.$?t.Sd.j():null}function re(t,e){this.V=t;var n=t.n,a=new jd(n.g),n=be(n)?new jd(n.g):n.ia?new pd(n):new kd(n);this.Af=new xd(n);var i=e.u(),s=e.D,r=a.ta(C,i.j(),null),l=n.ta(C,s.j(),null);this.Ja=new Gd(new pb(l,s.$,n.Fa()),new pb(r,i.$,a.Fa())),this.Ya=[],this.fg=new bd(t)}function se(t){return t.V}function ue(t,e){var n=t.Ja.D,a=[];return n.j().N()||n.j().U(M,function(t,e){a.push(new D("child_added",e,t))}),n.$&&a.push(Ab(n.j())),te(t,a,n.j(),e)}function te(t,e,n,a){return cd(t.fg,e,n,a?[a]:t.Ya)}function ve(t,e,n){this.type=Ad,this.source=t,this.path=e,this.children=n}function we(t,e,n,a){this.se=t,this.hf=e,this.Eb=n,this.We=a,I(!a||e,"Tagged queries must be from server.")}function ye(t,e){this.f=Mc("p:rest:"),this.H=t,this.Cb=e,this.Ea=null,this.aa={}}function ze(t,e){if(n(e))return"tag$"+e;var a=t.n;return I(be(a)&&a.g==M,"should have a tag if it's not a default query."),""+t.path}function Ae(t,e,n,a){n=n||{},n.format="export",t.Ea&&(n.auth=t.Ea);var i=(t.H.ib?"https://":"http://")+t.H.host+e+"?"+gb(n);t.f("Sending REST request for "+i);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(a&&4===s.readyState){t.f("REST Response for "+i+" received. status:",s.status,"response:",s.responseText);var e=null;if(s.status>=200&&300>s.status){try{e=jb(s.responseText)}catch(n){P("Failed to parse JSON response for "+i+": "+s.responseText)}a(null,e)}else 401!==s.status&&404!==s.status&&P("Got unsuccessful REST response for "+i+" Status: "+s.status),a(s.status);a=null}},s.open("GET",i,!0),s.send()}function Be(t,e){this.value=t,this.children=e||Ce}function De(t){var e=Ld;return r(t,function(t,n){e=e.set(new K(n),t)}),e}function Ee(t,e,n){if(null!=t.value&&n(t.value))return{path:F,value:t.value};if(e.e())return null;var a=O(e);return t=t.children.get(a),null!==t?(e=Ee(t,G(e),n),null!=e?{path:new K(a).w(e.path),value:e.value}:null):null}function Fe(t,e){return Ee(t,e,function(){return!0})}function Kd(t,e,n){if(e.e())return n;var a=O(e);return e=Kd(t.children.get(a)||Ld,G(e),n),a=e.e()?t.children.remove(a):t.children.Ma(a,e),new Be(t.value,a)}function Ge(t,e){return He(t,F,e)}function He(t,e,n){var a={};return t.children.ha(function(t,i){a[t]=He(i,e.w(t),n)}),n(e,t.value,a)}function Ie(t,e,n){return Je(t,e,F,n)}function Je(t,e,n,a){var i=t.value?a(n,t.value):!1;return i?i:e.e()?null:(i=O(e),(t=t.children.get(i))?Je(t,G(e),n.w(i),a):null)}function Ke(t,e,n){var a=F;if(!e.e()){var i=!0;t.value&&(i=n(a,t.value)),!0===i&&(i=O(e),(t=t.children.get(i))&&Le(t,G(e),a.w(i),n))}}function Le(t,e,n,a){if(e.e())return t;t.value&&a(n,t.value);var i=O(e);return(t=t.children.get(i))?Le(t,G(e),n.w(i),a):Ld}function Id(t,e){Me(t,F,e)}function Me(t,e,n){t.children.ha(function(t,a){Me(a,e.w(t),n)}),t.value&&n(e,t.value)}function Ne(t,e){t.children.ha(function(t,n){n.value&&e(t,n.value)})}function Oe(t){this.W=t}function Qe(t,e,n){if(e.e())return new Oe(new Be(n));var a=Fe(t.W,e);if(null!=a){var i=a.path,a=a.value;return e=N(i,e),a=a.G(e,n),new Oe(t.W.set(i,a))}return t=Kd(t.W,e,new Be(n)),new Oe(t)}function Re(t,e,n){var a=t;return eb(n,function(t,n){a=Qe(a,e.w(t),n)}),a}function Se(t,e){var n=Fe(t.W,e);return null!=n?t.W.get(n.path).oa(N(n.path,e)):null}function Te(t){var e=[],n=t.W.value;return null!=n?n.N()||n.U(M,function(t,n){e.push(new E(t,n))}):t.W.children.ha(function(t,n){null!=n.value&&e.push(new E(t,n.value))}),e}function Ue(t,e){if(e.e())return t;var n=Se(t,e);return null!=n?new Oe(new Be(n)):new Oe(t.W.subtree(e))}function Ve(t,e,n){if(null!=e.value)return n.G(t,e.value);var a=null;return e.children.ha(function(e,i){".priority"===e?(I(null!==i.value,"Priority writes must always be leaf nodes"),a=i.value):n=Ve(t.w(e),i,n)}),n.oa(t).e()||null===a||(n=n.G(t.w(".priority"),a)),n}function We(){this.T=Pe,this.za=[],this.Jc=-1}function Xe(t,e){return t.Ha?t.path.contains(e):!!ua(t.children,function(n,a){return t.path.w(a).contains(e)})}function Ze(t){return t.visible}function Ye(t,e,n){for(var a=Pe,i=0;t.length>i;++i){var s=t[i];if(e(s)){var r=s.path;if(s.Ha)n.contains(r)?(r=N(n,r),a=Qe(a,r,s.Ha)):r.contains(n)&&(r=N(r,n),a=Qe(a,F,s.Ha.oa(r)));else{if(!s.children)throw Fc("WriteRecord should have .snap or .children");n.contains(r)?(r=N(n,r),a=Re(a,r,s.children)):r.contains(n)&&(r=N(r,n),r.e()?a=Re(a,F,s.children):(s=w(s.children,O(r)))&&(s=s.oa(G(r)),a=Qe(a,F,s)))}}}return a}function $e(t,e){this.Jb=t,this.W=e}function af(){this.ya={}}function cf(t){return Pa(ra(t.ya),function(t){return!be(t.V.n)})}function df(t,e){if(be(e.n))return bf(t);var n=e.wa();return w(t.ya,n)}function bf(t){return va(t.ya,function(t){return be(t.V.n)})||null}function ef(t){this.sa=Ld,this.Db=new We,this.Ve={},this.jc={},this.Kc=t}function ff(t,e,a,i,s){var r=t.Db,l=s;return I(i>r.Jc,"Stacking an older write on top of newer ones"),n(l)||(l=!0),r.za.push({path:e,Ha:a,fe:i,visible:l}),l&&(r.T=Qe(r.T,e,a)),r.Jc=i,s?gf(t,new Rb(Vb,e,a)):[]}function hf(t,e,n,a){var i=t.Db;return I(a>i.Jc,"Stacking an older merge on top of newer ones"),i.za.push({path:e,children:n,fe:a,visible:!0}),i.T=Re(i.T,e,n),i.Jc=a,n=De(n),gf(t,new ve(Vb,e,n))}function jf(t,e,n){return n=n||!1,e=t.Db.Od(e),null==e?[]:gf(t,new Tb(e,n))}function kf(t,e,n){return n=De(n),gf(t,new ve(xe,e,n))}function lf(t,e,n,a){if(a=mf(t,a),null!=a){var i=nf(a);
return a=i.path,i=i.Eb,e=N(a,e),n=new Rb(new we(!1,!0,i,!0),e,n),of(t,a,n)}return[]}function pf(t,e,n,a){if(a=mf(t,a)){var i=nf(a);return a=i.path,i=i.Eb,e=N(a,e),n=De(n),n=new ve(new we(!1,!0,i,!0),e,n),of(t,a,n)}return[]}function tf(t){return Ge(t,function(t,e,n){if(e&&null!=bf(e))return[bf(e)];var a=[];return e&&(a=cf(e)),r(n,function(t){a=a.concat(t)}),a})}function wf(t,e){for(var n=0;e.length>n;++n){var a=e[n];if(!be(a.n)){var a=qf(a),i=t.jc[a];delete t.jc[a],delete t.Ve["_"+i]}}}function sf(t,e,n){var a=e.path,i=vf(t,e);if(n=uf(t,n),e=t.Kc.Se(e,i,n.td,n.J),a=t.sa.subtree(a),i)I(null==bf(a.value),"If we're adding a query, it shouldn't be shadowed");else for(i=Ge(a,function(t,e,n){if(!t.e()&&e&&null!=bf(e))return[se(bf(e))];var a=[];return e&&(a=a.concat(Qa(cf(e),function(t){return t.V}))),r(n,function(t){a=a.concat(t)}),a}),a=0;i.length>a;++a)n=i[a],t.Kc.Xd(n,vf(t,n));return e}function uf(t,e){var n=e.V,a=vf(t,n);return{td:function(){return(e.u()||C).hash()},J:function(e){if("ok"===e){if(a){var i=n.path;if(e=mf(t,a)){var s=nf(e);e=s.path,s=s.Eb,i=N(e,i),i=new Wb(new we(!1,!0,s,!0),i),e=of(t,e,i)}else e=[]}else e=gf(t,new Wb(xe,n.path));return e}return i="Unknown Error","too_big"===e?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?i="Client doesn't have permission to access the desired data.":"unavailable"==e&&(i="The service is unavailable"),i=Error(e+": "+i),i.code=e.toUpperCase(),t.hb(n,null,i)}}}function qf(t){return""+t.path+"$"+t.wa()}function nf(t){var e=t.indexOf("$");return I(-1!==e&&t.length-1>e,"Bad queryKey."),{Eb:t.substr(e+1),path:new K(t.substr(0,e))}}function mf(t,e){var n=t.Ve,a="_"+e;return a in n?n[a]:void 0}function vf(t,e){var n=qf(e);return w(t.jc,n)}function of(t,e,n){var a=t.sa.get(e);return I(a,"Missing sync point for query tag that we're tracking"),a.ab(n,new $e(e,t.Db),null)}function gf(t,e){return xf(t,e,t.sa,null,new $e(F,t.Db))}function xf(t,e,n,a,i){if(e.path.e())return yf(t,e,n,a,i);var s=n.get(F);null==a&&null!=s&&(a=s.eb(F));var r=[],l=O(e.path),c=e.Vc(l);if((n=n.children.get(l))&&c)var o=a?a.M(l):null,l=i.w(l),r=r.concat(xf(t,c,n,o,l));return s&&(r=r.concat(s.ab(e,i,a))),r}function yf(t,e,n,a,i){var s=n.get(F);null==a&&null!=s&&(a=s.eb(F));var r=[];return n.children.ha(function(n,s){var l=a?a.M(n):null,c=i.w(n),o=e.Vc(n);o&&(r=r.concat(yf(t,o,s,l,c)))}),s&&(r=r.concat(s.ab(e,i,a))),r}function zf(){this.children={},this.jd=0,this.value=null}function Af(t,e,n){this.Dd=t?t:"",this.Xc=e?e:null,this.B=n?n:new zf}function Bf(t,e){for(var n,a=e instanceof K?e:new K(e),i=t;null!==(n=O(a));)i=new Af(n,i,w(i.B.children,n)||new zf),a=G(a);return i}function Cf(t,e){I(e!==void 0,"Cannot set value to undefined"),t.B.value=e,Df(t)}function Ef(t,e,n,a){n&&!a&&e(t),t.U(function(t){Ef(t,e,!0,a)}),n&&a&&e(t)}function Ff(t,e){for(var n=t.parent();null!==n&&!e(n);)n=n.parent()}function Df(t){if(null!==t.Xc){var e=t.Xc,n=t.Dd,a=t.e(),i=v(e.B.children,n);a&&i?(delete e.B.children[n],e.B.jd--,Df(e)):a||i||(e.B.children[n]=t.B,e.B.jd++,Df(e))}}function Gf(t){I(ea(t)&&t.length>0,"Requires a non-empty array"),this.Qf=t,this.Lc={}}function Hf(t,e){I(Ta(t.Qf,function(t){return t===e}),"Unknown event: "+e)}function Jf(){if(Gf.call(this,["online"]),this.Uc=!0,"undefined"!=typeof window&&window.addEventListener!==void 0){var t=this;window.addEventListener("online",function(){t.Uc||t.be("online",!0),t.Uc=!0},!1),window.addEventListener("offline",function(){t.Uc&&t.be("online",!1),t.Uc=!1},!1)}}function Kf(){Gf.call(this,["visible"]);var t,e;if("undefined"!=typeof document&&document.addEventListener!==void 0&&(document.hidden!==void 0?(e="visibilitychange",t="hidden"):document.mozHidden!==void 0?(e="mozvisibilitychange",t="mozHidden"):document.msHidden!==void 0?(e="msvisibilitychange",t="msHidden"):document.webkitHidden!==void 0&&(e="webkitvisibilitychange",t="webkitHidden")),this.tc=!0,e){var n=this;document.addEventListener(e,function(){var e=!document[t];e!==n.tc&&(n.tc=e,n.be("visible",e))},!1)}}function Nf(t){return p(t)&&0!==t.length&&!Lf.test(t)}function Of(t){return null===t||p(t)||ga(t)&&!Qc(t)||ia(t)&&v(t,".sv")}function Pf(t,e,a,i){i&&!n(e)||Qf(z(t,1,i),e,a)}function Qf(t,e,a){if(a instanceof K&&(a=new tc(a,t)),!n(e))throw Error(t+"contains undefined "+wc(a));if(ha(e))throw Error(t+"contains a function "+wc(a)+" with contents: "+(""+e));if(Qc(e))throw Error(t+"contains "+(""+e)+" "+wc(a));if(p(e)&&e.length>10485760/3&&uc(e)>10485760)throw Error(t+"contains a string greater than 10485760 utf8 bytes "+wc(a)+" ('"+e.substring(0,50)+"...')");if(ia(e)){var i=!1,s=!1;if(eb(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Nf(e)))throw Error(t+" contains an invalid key ("+e+") "+wc(a)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');a.push(e),Qf(t,n,a),a.pop()}),i&&s)throw Error(t+' contains ".value" child '+wc(a)+" in addition to actual children.")}}function Rf(t,e,n){if(!ia(e)||ea(e))throw Error(z(t,1,!1)+" must be an Object containing the children to replace.");if(v(e,".value"))throw Error(z(t,1,!1)+' must not contain ".value".  To overwrite with a leaf value, just use .set() instead.');Pf(t,e,n,!1)}function Sf(t,e,n){if(Qc(n))throw Error(z(t,e,!1)+"is "+(""+n)+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Of(n))throw Error(z(t,e,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function Tf(t,e,a){if(!a||n(e))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(z(t,1,a)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Uf(t,e,a,i){if((!i||n(a))&&!Nf(a))throw Error(z(t,e,i)+'was an invalid key: "'+a+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Vf(t,e){if(!p(e)||0===e.length||Mf.test(e))throw Error(z(t,1,!1)+'was an invalid path: "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Wf(t,e){if(".info"===O(e))throw Error(t+" failed: Can't modify data under /.info/")}function Xf(t,e){if(!p(e))throw Error(z(t,1,!1)+"must be a valid credential (a string).")}function Yf(t,e,n){if(!p(n))throw Error(z(t,e,!1)+"must be a valid string.")}function Zf(t,e,a,i){if(!(i&&!n(a)||ia(a)&&null!==a))throw Error(z(t,e,i)+"must be a valid object.")}function $f(t,e,n){if(!ia(e)||null===e||!v(e,n))throw Error(z(t,1,!1)+'must contain the key "'+n+'"');if(!p(w(e,n)))throw Error(z(t,1,!1)+'must contain the key "'+n+'" with type "string"')}function ag(){this.set={}}function bg(t,e){r(t.set,function(t,n){e(n,t)})}function nc(){this.m=this.C=null}function cg(t,e){if(e.e())return t.C=null,t.m=null,!0;if(null!==t.C){if(t.C.N())return!1;var n=t.C;return t.C=null,n.U(M,function(e,n){t.lc(new K(e),n)}),cg(t,e)}return null!==t.m?(n=O(e),e=G(e),t.m.contains(n)&&cg(t.m.get(n),e)&&t.m.remove(n),t.m.e()?(t.m=null,!0):!1):!0}function oc(t,e,n){null!==t.C?n(e,t.C):t.U(function(t,a){var i=new K(""+e+"/"+t);oc(a,i,n)})}function eg(t,e,n){this.kd=t||{},this.ae=e||{},this.$a=n||{},this.kd.remember||(this.kd.remember="default")}function gg(t){var e={},n={};return eb(t||{},function(t,a){Na(fg,t)>=0?e[t]=a:n[t]=a}),new eg(e,{},n)}function hg(t,e){this.Me=["session",t.Ld,t.yb].join(":"),this.Yd=e}function ig(){var t=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if((t=t.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&t.length>1)return parseFloat(t[1])>=8}else if(t.indexOf("Trident")>-1&&(t=t.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&t.length>1)return parseFloat(t[1])>=8;return!1}function jg(){var t,e=window.opener.frames;for(t=e.length-1;t>=0;t--)try{if(e[t].location.protocol===window.location.protocol&&e[t].location.host===window.location.host&&"__winchan_relay_frame"===e[t].name)return e[t]}catch(n){}return null}function kg(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener&&t.addEventListener(e,n,!1)}function lg(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener&&t.removeEventListener(e,n,!1)}function mg(t){/^https?:\/\//.test(t)||(t=window.location.href);var e=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(t);return e?e[1]:t}function ng(t){var e="";try{t=t.replace("#","");var n=hb(t);n&&v(n,"__firebase_request_key")&&(e=w(n,"__firebase_request_key"))}catch(a){}return e}function og(){var t=Pc(dg);return t.scheme+"://"+t.host+"/v2"}function pg(t){return og()+"/"+t+"/auth/channel"}function qg(t){var e=this;if(this.yc=t,this.Zd="*",ig()?this.Oc=this.vd=jg():(this.Oc=window.opener,this.vd=window),!e.Oc)throw"Unable to find relay frame";kg(this.vd,"message",q(this.gc,this)),kg(this.vd,"message",q(this.uf,this));try{rg(this,{a:"ready"})}catch(n){kg(this.Oc,"load",function(){rg(e,{a:"ready"})})}kg(window,"unload",q(this.ug,this))}function rg(t,e){e=B(e),ig()?t.Oc.doPost(e,t.Zd):t.Oc.postMessage(e,t.Zd)}function sg(t){this.nc=Ga()+Ga()+Ga(),this.yf=t}function U(t){var e=Error(w(tg,t),t);return e.code=t,e}function ug(t){(!t.window_features||-1!==navigator.userAgent.indexOf("Fennec/")||-1!==navigator.userAgent.indexOf("Firefox/")&&-1!==navigator.userAgent.indexOf("Android"))&&(t.window_features=void 0),t.window_name||(t.window_name="_blank"),this.options=t}function vg(t){t.method||(t.method="GET"),t.headers||(t.headers={}),t.headers.content_type||(t.headers.content_type="application/json"),t.headers.content_type=t.headers.content_type.toLowerCase(),this.options=t}function wg(t){t.method||(t.method="GET"),t.headers||(t.headers={}),t.headers.content_type||(t.headers.content_type="application/json"),t.headers.content_type=t.headers.content_type.toLowerCase(),this.options=t}function xg(t){this.nc=Ga()+Ga()+Ga(),this.yf=t}function yg(t){t.callback_parameter||(t.callback_parameter="callback"),this.options=t,window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}function zg(t,e,n){setTimeout(function(){try{var a=document.createElement("script");a.type="text/javascript",a.id=t,a.async=!0,a.src=e,a.onerror=function(){var e=document.getElementById(t);null!==e&&e.parentNode.removeChild(e),n&&n(U("NETWORK_ERROR"))};var i=document.getElementsByTagName("head");(i&&0!=i.length?i[0]:document.documentElement).appendChild(a)}catch(s){n&&n(U("NETWORK_ERROR"))}},0)}function Ag(t,e,n,a){Gf.call(this,["auth_status"]),this.H=t,this.Ze=e,this.Pg=n,this.He=a,this.qc=new hg(t,[Ac,Bc]),this.kb=null,Bg(this)}function Bg(t){Bc.get("redirect_request_id")&&Cg(t);var e=t.qc.get();e&&e.token?(Dg(t,e),t.Ze(e.token,function(n,a){Eg(t,n,a,!1,e.token,e)},function(e,n){Fg(t,"resumeSession()",e,n)})):Dg(t,null)}function Gg(t,e,n,a,i,s){"firebaseio-demo.com"===t.H.domain&&P("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com."),t.Ze(e,function(s,r){Eg(t,s,r,!0,e,n,a||{},i)},function(e,n){Fg(t,"auth()",e,n,s)})}function Hg(t,e){t.qc.clear(),Dg(t,null),t.Pg(function(t,n){if("ok"===t)Q(e,null);else{var a=(t||"error").toUpperCase(),i=a;n&&(i+=": "+n),i=Error(i),i.code=a,Q(e,i)}})}function Eg(t,e,n,a,i,s,r,l){"ok"===e?(a&&(e=n.auth,s.auth=e,s.expires=n.expires,s.token=ad(i)?i:"",n=null,e&&v(e,"uid")?n=w(e,"uid"):v(s,"uid")&&(n=w(s,"uid")),s.uid=n,n="custom",e&&v(e,"provider")?n=w(e,"provider"):v(s,"provider")&&(n=w(s,"provider")),s.provider=n,t.qc.clear(),ad(i)&&(r=r||{},n=Ac,"sessionOnly"===r.remember&&(n=Bc),"none"!==r.remember&&t.qc.set(s,n)),Dg(t,s)),Q(l,null,s)):(t.qc.clear(),Dg(t,null),s=t=(e||"error").toUpperCase(),n&&(s+=": "+n),s=Error(s),s.code=t,Q(l,s))}function Fg(t,e,n,a,i){P(e+" was canceled: "+a),t.qc.clear(),Dg(t,null),t=Error(a),t.code=n.toUpperCase(),Q(i,t)}function Ig(t,e,n,a,i){Jg(t),n=new eg(a||{},{},n||{}),Kg(t,[vg],"/auth/"+e,n,i)}function Lg(t,e,n,a){Jg(t);var i=[ug,xg];n=gg(n),"anonymous"===e||"password"===e?setTimeout(function(){Q(a,U("TRANSPORT_UNAVAILABLE"))},0):(n.ae.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"==typeof screen?.5*(screen.height-625):0)+",left="+("object"==typeof screen?.5*(screen.width-625):0),n.ae.relay_url=pg(t.H.yb),n.ae.requestWithCredential=q(t.oc,t),Kg(t,i,"/auth/"+e,n,a))}function Cg(t){var e=Bc.get("redirect_request_id");if(e){var n=Bc.get("redirect_client_options");Bc.remove("redirect_request_id"),Bc.remove("redirect_client_options");var a=[wg,yg],e={requestId:e,requestKey:ng(document.location.hash)},n=new eg(n,{},e);try{document.location.hash=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")}catch(i){}Kg(t,a,"/auth/session",n)}}function Kg(t,e,n,a,i){Mg(t,e,n,a,function(e,n){!e&&n&&n.token&&n.uid?Gg(t,n.token,n,a.kd,function(t,e){t?Q(i,t):Q(i,null,e)}):Q(i,e||U("UNKNOWN_ERROR"))})}function Mg(t,e,n,a,i){e=Pa(e,function(t){return"function"==typeof t.isAvailable&&t.isAvailable()}),0===e.length?setTimeout(function(){Q(i,U("TRANSPORT_UNAVAILABLE"))},0):(e=new(e.shift())(a.ae),a=fb(a.$a),a.v="node-2.2.3",a.transport=e.Nb(),a.suppress_status_codes=!0,t=og()+"/"+t.H.yb+n,e.open(t,a,function(t,e){if(t)Q(i,t);else if(e&&e.error){var n=Error(e.error.message);n.code=e.error.code,n.details=e.error.details,Q(i,n)}else Q(i,null,e)}))}function Dg(t,e){var n=null!==t.kb||null!==e;t.kb=e,n&&t.be("auth_status",e),t.He(null!==e)}function Jg(t){var e=t.H;if("firebaseio.com"!==e.domain&&"firebaseio-demo.com"!==e.domain&&"auth.firebase.com"===dg)throw Error("This custom Firebase server ('"+t.H.domain+"') does not support delegated login.")}function Ng(t){this.gc=t,this.Kd=[],this.Pb=0,this.me=-1,this.Bb=null}function Og(t,e,n){t.me=e,t.Bb=n,t.me<t.Pb&&(t.Bb(),t.Bb=null)}function Pg(t,e,n){for(t.Kd[e]=n;t.Kd[t.Pb];){var a=t.Kd[t.Pb];delete t.Kd[t.Pb];for(var i=0;a.length>i;++i)if(a[i]){var s=t;zb(function(){s.gc(a[i])})}if(t.Pb===t.me){t.Bb&&(clearTimeout(t.Bb),t.Bb(),t.Bb=null);break}t.Pb++}}function Qg(t,e,n){this.ne=t,this.f=Mc(t),this.lb=this.mb=0,this.Ua=Lb(e),this.Td=n,this.Ec=!1,this.fd=function(t){e.host!==e.Na&&(t.ns=e.yb);var n,a=[];for(n in t)t.hasOwnProperty(n)&&a.push(n+"="+t[n]);return(e.ib?"https://":"http://")+e.Na+"/.lp?"+a.join("&")}}function Ug(t,e){var n=B(e).length;t.lb+=n,Ib(t.Ua,"bytes_received",n)}function Tg(t,e,n,a){this.fd=a,this.gb=n,this.Le=new ag,this.Yc=[],this.pe=Math.floor(1e8*Math.random()),this.Hf=!0,this.ag=t,this.sg=e}function Wg(t){if(t.he&&t.Hf&&t.Le.count()<(t.Yc.length>0?2:1)){t.pe++;var e={};e.id=t.Fe,e.pw=t.sf,e.ser=t.pe;for(var e=t.fd(e),n="",a=0;t.Yc.length>0&&1870>=t.Yc[0].df.length+30+n.length;){var i=t.Yc.shift(),n=n+"&seg"+a+"="+i.Gg+"&ts"+a+"="+i.Og+"&d"+a+"="+i.df;a++}return Yg(t,e+n,t.pe),!0}return!1}function Yg(t,e,n){function a(){t.Le.remove(n),Wg(t)}t.Le.add(n,1);var i=setTimeout(a,Math.floor(25e3));Vg(t,e,function(){clearTimeout(i),a()})}function Vg(t,e,n){Zg(t,e,n)}function Xg(t,e){$g||($g=require("request")),$g(t,function(n,a,i){if(n)throw"Rest request for "+t.url+" failed.";e&&e(i)})}function Zg(t,e,n){Xg({url:e,Vg:!0},function(e){ah(t,e),n()})}function ah(a,b){eval("var jsonpCB = function(pLPCommand, pRTLPCB) {"+b+"}"),jsonpCB(a.ag,a.sg)}function ch(t,e,n){this.ne=t,this.f=Mc(this.ne),this.frames=this.Hc=null,this.lb=this.mb=this.Xe=0,this.Ua=Lb(e),this.Ob=(e.ib?"wss://":"ws://")+e.Na+"/.ws?v=5",e.host!==e.Na&&(this.Ob=this.Ob+"&ns="+e.yb),n&&(this.Ob=this.Ob+"&s="+n)}function fh(t,e){if(t.frames.push(e),t.frames.length==t.Xe){var n=t.frames.join("");t.frames=null,n=jb(n),t.rg(n)}}function eh(t){clearInterval(t.Hc),t.Hc=setInterval(function(){t.va&&t.va.send("0"),eh(t)},Math.floor(45e3))}function gh(t){hh(this,t)}function hh(t,e){var n=ch&&ch.isAvailable(),a=n&&!(Ac.of||!0===Ac.get("previous_websocket_failure"));if(e.Rg&&(n||P("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)t.dd=[ch];else{var i=t.dd=[];Wc(ih,function(t,e){e&&e.isAvailable()&&i.push(e)})}}function jh(t){if(t.dd.length>0)return t.dd[0];throw Error("No transports available")}function kh(t,e,n,a,i,s){this.id=t,this.f=Mc("c:"+this.id+":"),this.gc=n,this.Tc=a,this.ka=i,this.Je=s,this.H=e,this.Jd=[],this.$e=0,this.Jf=new gh(e),this.Ta=0,this.f("Connection created"),lh(this)}function lh(t){var e=jh(t.Jf);t.L=new e("c:"+t.id+":"+t.$e++,t.H),t.Ne=e.responsesRequiredToBeHealthy||0;var n=mh(t,t.L),a=nh(t,t.L);t.ed=t.L,t.ad=t.L,t.F=null,t.wb=!1,setTimeout(function(){t.L&&t.L.open(n,a)},Math.floor(0)),e=e.healthyTimeout||0,e>0&&(t.ud=setTimeout(function(){t.ud=null,t.wb||(t.L&&t.L.lb>102400?(t.f("Connection exceeded healthy timeout but has received "+t.L.lb+" bytes.  Marking connection healthy."),t.wb=!0,t.L.Ad()):t.L&&t.L.mb>10240?t.f("Connection exceeded healthy timeout but has sent "+t.L.mb+" bytes.  Leaving connection alive."):(t.f("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))}function nh(t,e){return function(n){e===t.L?(t.L=null,n||0!==t.Ta?1===t.Ta&&t.f("Realtime connection lost."):(t.f("Realtime connection failed."),"s-"===t.H.Na.substr(0,2)&&(Ac.remove("host:"+t.H.host),t.H.Na=t.H.host)),t.close()):e===t.F?(t.f("Secondary connection lost."),n=t.F,t.F=null,t.ed!==n&&t.ad!==n||t.close()):t.f("closing an old connection")}}function mh(t,e){return function(n){if(2!=t.Ta)if(e===t.ad){var a=Tc("t",n);if(n=Tc("d",n),"c"==a){if(a=Tc("t",n),"d"in n)if(n=n.d,"h"===a){var a=n.ts,i=n.v,s=n.h;t.Td=n.s,Dc(t.H,s),0==t.Ta&&(t.L.start(),oh(t,t.L,a),"5"!==i&&P("Protocol version mismatch detected"),n=t.Jf,(n=n.dd.length>1?n.dd[1]:null)&&ph(t,n))}else if("n"===a){for(t.f("recvd end transmission on primary"),t.ad=t.F,n=0;t.Jd.length>n;++n)t.Fd(t.Jd[n]);t.Jd=[],qh(t)}else"s"===a?(t.f("Connection shutdown command received. Shutting down..."),t.Je&&(t.Je(n),t.Je=null),t.ka=null,t.close()):"r"===a?(t.f("Reset packet received.  New host: "+n),Dc(t.H,n),1===t.Ta?t.close():(rh(t),lh(t))):"e"===a?Nc("Server Error: "+n):"o"===a?(t.f("got pong on primary."),sh(t),th(t)):Nc("Unknown control packet command: "+a)}else"d"==a&&t.Fd(n)}else if(e===t.F)if(a=Tc("t",n),n=Tc("d",n),"c"==a)"t"in n&&(n=n.t,"a"===n?uh(t):"r"===n?(t.f("Got a reset on secondary, closing it"),t.F.close(),t.ed!==t.F&&t.ad!==t.F||t.close()):"o"===n&&(t.f("got pong on secondary."),t.Gf--,uh(t)));else{if("d"!=a)throw Error("Unknown protocol layer: "+a);t.Jd.push(n)}else t.f("message on old connection")}}function qh(t){t.ed===t.F&&t.ad===t.F&&(t.f("cleaning up and promoting a connection: "+t.F.ne),t.L=t.F,t.F=null)}function uh(t){0>=t.Gf?(t.f("Secondary connection is healthy."),t.wb=!0,t.F.Ad(),t.F.start(),t.f("sending client ack on secondary"),t.F.send({t:"c",d:{t:"a",d:{}}}),t.f("Ending transmission on primary"),t.L.send({t:"c",d:{t:"n",d:{}}}),t.ed=t.F,qh(t)):(t.f("sending ping on secondary."),t.F.send({t:"c",d:{t:"p",d:{}}}))}function sh(t){t.wb||(t.Ne--,0>=t.Ne&&(t.f("Primary connection is healthy."),t.wb=!0,t.L.Ad()))}function ph(t,e){t.F=new e("c:"+t.id+":"+t.$e++,t.H,t.Td),t.Gf=e.responsesRequiredToBeHealthy||0,t.F.open(mh(t,t.F),nh(t,t.F)),setTimeout(function(){t.F&&(t.f("Timed out trying to upgrade."),t.F.close())},Math.floor(6e4))}function oh(t,e,n){t.f("Realtime connection established."),t.L=e,t.Ta=1,t.Tc&&(t.Tc(n),t.Tc=null),0===t.Ne?(t.f("Primary connection is healthy."),t.wb=!0):setTimeout(function(){th(t)},Math.floor(5e3))}function th(t){t.wb||1!==t.Ta||(t.f("sending ping on primary."),vh(t,{t:"c",d:{t:"p",d:{}}}))}function vh(t,e){if(1!==t.Ta)throw"Connection is not connected";t.ed.send(e)}function rh(t){t.f("Shutting down all connections"),t.L&&(t.L.close(),t.L=null),t.F&&(t.F.close(),t.F=null),t.ud&&(clearTimeout(t.ud),t.ud=null)}function wh(t,e,n,a){this.id=xh++,this.f=Mc("p:"+this.id+":"),this.Hb=!0,this.aa={},this.pa=[],this.Wc=0,this.Sc=[],this.ma=!1,this.Za=1e3,this.Bd=3e5,this.Cb=e,this.Rc=n,this.Ke=a,this.H=t,this.Re=null,this.$c={},this.Fg=0,this.Ic=this.Be=null,yh(this,0),Kf.Vb().Ab("visible",this.vg,this),-1===t.host.indexOf("fblocal")&&Jf.Vb().Ab("online",this.tg,this)}function Ah(t,e){var n=e.Cg,a=""+n.path,i=n.wa();t.f("Listen on "+a+" for "+i);var s={p:a};e.tag&&(s.q=ae(n.n),s.t=e.tag),s.h=e.td(),t.Ca("q",s,function(s){var r=s.d,l=s.s;if(r&&"object"==typeof r&&v(r,"w")){var c=w(r,"w");ea(c)&&Na(c,"no_index")>=0&&P("Using an unspecified index. Consider adding "+('".indexOn": "'+(""+n.n.g)+'"')+" at "+(""+n.path)+" to your security rules for better performance")}(t.aa[a]&&t.aa[a][i])===e&&(t.f("listen response",s),"ok"!==l&&Bh(t,a,i),e.J&&e.J(l,r))})}function Ch(t){var e=t.Ea;t.ma&&e&&t.Ca("auth",{cred:e.cg},function(n){var a=n.s;n=n.d||"error","ok"!==a&&t.Ea===e&&delete t.Ea,e.gf?"ok"!==a&&e.hd&&e.hd(a,n):(e.gf=!0,e.xc&&e.xc(a,n))})}function Dh(t,e,n,a,i){n={p:n,d:a},t.f("onDisconnect "+e,n),t.Ca(e,n,function(t){i&&setTimeout(function(){i(t.s,t.d)},Math.floor(0))})}function Eh(t,e,a,i,s,r){i={p:a,d:i},n(r)&&(i.h=r),t.pa.push({action:e,Df:i,J:s}),t.Wc++,e=t.pa.length-1,t.ma?Fh(t,e):t.f("Buffering put: "+a)}function Fh(t,e){var n=t.pa[e].action,a=t.pa[e].Df,i=t.pa[e].J;t.pa[e].Dg=t.ma,t.Ca(n,a,function(a){t.f(n+" response",a),delete t.pa[e],t.Wc--,0===t.Wc&&(t.pa=[]),i&&i(a.s,a.d)})}function yh(t,e){I(!t.Ra,"Scheduling a connect when we're already connected/ing?"),t.Rb&&clearTimeout(t.Rb),t.Rb=setTimeout(function(){t.Rb=null,Ih(t)},Math.floor(e))}function Ih(t){if(t.Hb){t.f("Making a connection attempt"),t.Be=(new Date).getTime(),t.Ic=null;var e=q(t.Fd,t),n=q(t.Tc,t),a=q(t.xf,t),i=t.id+":"+zh++;t.Ra=new kh(i,t.H,e,n,a,function(e){P(e+" ("+(""+t.H)+")"),t.Hb=!1})}}function Gh(t,e,n){n=n?Qa(n,function(t){return Uc(t)}).join("$"):"default",(t=Bh(t,e,n))&&t.J&&t.J("permission_denied")}function Bh(t,e,a){e=""+new K(e);var i;return n(t.aa[e])?(i=t.aa[e][a],delete t.aa[e][a],0===pa(t.aa[e])&&delete t.aa[e]):i=void 0,i}function Hh(t){Ch(t),r(t.aa,function(e){r(e,function(e){Ah(t,e)})});for(var e=0;t.pa.length>e;e++)t.pa[e]&&Fh(t,e);for(;t.Sc.length;)e=t.Sc.shift(),Dh(t,e.action,e.ic,e.data,e.J)}function R(t,e,n){this.B=t,this.V=e,this.g=n}function Jh(t,e){this.H=t,this.Ua=Lb(t),this.ea=new rb,this.Ed=1,this.Qa=null,e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0?(this.ca=new ye(this.H,q(this.Cb,this)),setTimeout(q(this.Rc,this,!0),0)):this.ca=this.Qa=new wh(this.H,q(this.Cb,this),q(this.Rc,this),q(this.Ke,this)),this.Mg=Mb(t,q(function(){return new Gb(this.Ua,this.ca)},this)),this.sc=new Af,this.ye=new kb;var n=this;this.yd=new ef({Se:function(t,e,a,i){return e=[],a=n.ye.j(t.path),a.e()||(e=gf(n.yd,new Rb(xe,t.path,a)),setTimeout(function(){i("ok")},0)),e},Xd:ba}),Kh(this,"connected",!1),this.ka=new nc,this.P=new Ag(t,q(this.ca.P,this.ca),q(this.ca.ce,this.ca),q(this.He,this)),this.od=0,this.ze=null,this.O=new ef({Se:function(t,e,a,i){return n.ca.pf(t,a,e,function(e,a){var s=i(e,a);wb(n.ea,t.path,s)}),[]},Xd:function(t,e){n.ca.Kf(t,e)}})}function Lh(t){return t=t.ye.j(new K(".info/serverTimeOffset")).K()||0,(new Date).getTime()+t}function Mh(t){return t=t={timestamp:Lh(t)},t.timestamp=t.timestamp||(new Date).getTime(),t}function Kh(t,e,n){e=new K("/.info/"+e),n=L(n);var a=t.ye;a.Rd=a.Rd.G(e,n),n=gf(t.yd,new Rb(xe,e,n)),wb(t.ea,e,n)}function Oh(t){t.f("onDisconnectEvents");var e=Mh(t),n=[];oc(mc(t.ka,e),F,function(e,a){n=n.concat(gf(t.O,new Rb(xe,e,a)));var i=Qh(t,e);Nh(t,i)}),t.ka=new nc,wb(t.ea,F,n)}function Rh(t,e,n,a){var i=L(n);t.ca.Ie(""+e,i.K(!0),function(n,s){"ok"===n&&t.ka.lc(e,i),Ph(a,n,s)})}function Sh(t,e,n,a,i){var s=L(n,a);t.ca.Ie(""+e,s.K(!0),function(n,a){"ok"===n&&t.ka.lc(e,s),Ph(i,n,a)})}function Th(t,e,n,a){var i,s=!0;for(i in n)s=!1;s?(yb("onDisconnect().update() called with empty data.  Don't do anything."),Ph(a,"ok")):t.ca.wf(""+e,n,function(i,s){if("ok"===i)for(var r in n){var l=L(n[r]);t.ka.lc(e.w(r),l)}Ph(a,i,s)})}function Uh(t,e,n){n=".info"===O(e.path)?t.yd.Lb(e,n):t.O.Lb(e,n),ub(t.ea,e.path,n)}function Ph(t,e,n){t&&zb(function(){if("ok"==e)t(null);else{var a=(e||"error").toUpperCase(),i=a;n&&(i+=": "+n),i=Error(i),i.code=a,t(i)}})}function Vh(t,e,a,i,s){function r(){}t.f("transaction on "+e);var l=new T(t,e);if(l.Ab("value",r),a={path:e,update:a,J:i,status:null,zf:Ec(),Ye:s,Ff:0,de:function(){l.fc("value",r)},ge:null,Aa:null,ld:null,md:null,nd:null},i=t.O.ua(e,void 0)||C,a.ld=i,i=a.update(i.K()),n(i)){Qf("transaction failed: Data returned ",i,a.path),a.status=1,s=Bf(t.sc,e);var c=s.Ba()||[];c.push(a),Cf(s,c),"object"==typeof i&&null!==i&&v(i,".priority")?(c=w(i,".priority"),I(Of(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(t.O.ua(e)||C).A().K(),s=Mh(t),i=L(i,c),s=pc(i,s),a.md=i,a.nd=s,a.Aa=t.Ed++,a=ff(t.O,e,s,a.Aa,a.Ye),wb(t.ea,e,a),Wh(t)}else a.de(),a.md=null,a.nd=null,a.J&&(t=new R(a.ld,new T(t,a.path),M),a.J(null,!1,t))}function Wh(t,e){var n=e||t.sc;if(e||Xh(t,n),null!==n.Ba()){var a=Yh(t,n);I(a.length>0,"Sending zero length transaction queue"),Sa(a,function(t){return 1===t.status})&&Zh(t,n.path(),a)}else n.sd()&&n.U(function(e){Wh(t,e)})}function Zh(t,e,n){for(var a=Qa(n,function(t){return t.Aa}),i=t.O.ua(e,a)||C,a=i,i=i.hash(),s=0;n.length>s;s++){var r=n[s];I(1===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=2,r.Ff++;var l=N(e,r.path),a=a.G(l,r.md)}a=a.K(!0),t.ca.put(""+e,a,function(a){t.f("transaction put response",{path:""+e,status:a});var i=[];if("ok"===a){for(a=[],s=0;n.length>s;s++){if(n[s].status=3,i=i.concat(jf(t.O,n[s].Aa)),n[s].J){var r=n[s].nd,l=new T(t,n[s].path);a.push(q(n[s].J,null,null,!0,new R(r,l,M)))}n[s].de()}for(Xh(t,Bf(t.sc,e)),Wh(t),wb(t.ea,e,i),s=0;a.length>s;s++)zb(a[s])}else{if("datastale"===a)for(s=0;n.length>s;s++)n[s].status=4===n[s].status?5:1;else for(P("transaction at "+(""+e)+" failed: "+a),s=0;n.length>s;s++)n[s].status=5,n[s].ge=a;Nh(t,e)}},i)}function Nh(t,e){var n=$h(t,e),a=n.path(),n=Yh(t,n);return ai(t,n,a),a}function ai(t,e,a){if(0!==e.length){for(var i=[],s=[],r=Qa(e,function(t){return t.Aa}),l=0;e.length>l;l++){var c,o=e[l],h=N(a,o.path),p=!1;if(I(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),5===o.status)p=!0,c=o.ge,s=s.concat(jf(t.O,o.Aa,!0));else if(1===o.status)if(o.Ff>=25)p=!0,c="maxretry",s=s.concat(jf(t.O,o.Aa,!0));else{var g=t.O.ua(o.path,r)||C;o.ld=g;var d=e[l].update(g.K());n(d)?(Qf("transaction failed: Data returned ",d,o.path),h=L(d),"object"==typeof d&&null!=d&&v(d,".priority")||(h=h.da(g.A())),g=o.Aa,d=Mh(t),d=pc(h,d),o.md=h,o.nd=d,o.Aa=t.Ed++,Va(r,g),s=s.concat(ff(t.O,o.path,d,o.Aa,o.Ye)),s=s.concat(jf(t.O,g,!0))):(p=!0,c="nodata",s=s.concat(jf(t.O,o.Aa,!0)))}wb(t.ea,a,s),s=[],p&&(e[l].status=3,setTimeout(e[l].de,Math.floor(0)),e[l].J&&("nodata"===c?(o=new T(t,e[l].path),i.push(q(e[l].J,null,null,!1,new R(e[l].ld,o,M)))):i.push(q(e[l].J,null,Error(c),!1,null))))}for(Xh(t,t.sc),l=0;i.length>l;l++)zb(i[l]);Wh(t)}}function $h(t,e){for(var n,a=t.sc;null!==(n=O(e))&&null===a.Ba();)a=Bf(a,n),e=G(e);return a}function Yh(t,e){var n=[];return bi(t,e,n),n.sort(function(t,e){return t.zf-e.zf}),n}function bi(t,e,n){var a=e.Ba();if(null!==a)for(var i=0;a.length>i;i++)n.push(a[i]);e.U(function(e){bi(t,e,n)})}function Xh(t,e){var n=e.Ba();if(n){for(var a=0,i=0;n.length>i;i++)3!==n[i].status&&(n[a]=n[i],a++);n.length=a,Cf(e,n.length>0?n:null)}e.U(function(e){Xh(t,e)})}function Qh(t,e){var n=$h(t,e).path(),a=Bf(t.sc,e);return Ff(a,function(e){ci(t,e)}),ci(t,a),Ef(a,function(e){ci(t,e)}),n}function ci(t,e){var n=e.Ba();if(null!==n){for(var a=[],i=[],s=-1,r=0;n.length>r;r++)4!==n[r].status&&(2===n[r].status?(I(s===r-1,"All SENT items should be at beginning of queue."),s=r,n[r].status=4,n[r].ge="set"):(I(1===n[r].status,"Unexpected transaction status in abort"),n[r].de(),i=i.concat(jf(t.O,n[r].Aa,!0)),n[r].J&&a.push(q(n[r].J,null,Error("set"),!1,null))));for(-1===s?Cf(e,null):n.length=s+1,wb(t.ea,e.path(),i),r=0;a.length>r;r++)zb(a[r])}}function W(){this.mc={},this.Lf=!1}function X(t,e){this.Zc=t,this.qa=e}function Y(t,e,n,a){this.k=t,this.path=e,this.n=n,this.hc=a}function di(t){var e=null,n=null;if(t.la&&(e=md(t)),t.na&&(n=od(t)),t.g===Td){if(t.la){if("[MIN_NAME]"!=ld(t))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof e)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(t.na){if("[MAX_NAME]"!=nd(t))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof n)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(t.g===M){if(null!=e&&!Of(e)||null!=n&&!Of(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(I(t.g instanceof Pd||t.g===Wd,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function ei(t){if(t.la&&t.na&&t.ia&&(!t.ia||""===t.Kb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function fi(t,e){if(!0===t.hc)throw Error(e+": You can't combine multiple orderBy calls.")}function gi(t,e,n){var a={cancel:null,La:null};if(e&&n)a.cancel=e,A(t,3,a.cancel,!0),a.La=n,ib(t,4,a.La);else if(e)if("object"==typeof e&&null!==e)a.La=e;else{if("function"!=typeof e)throw Error(z(t,3,!0)+" must either be a cancel callback or a context object.");a.cancel=e}return a}function T(t,e){var n,a,i;if(t instanceof Jh)n=t,a=e;else{y("new Firebase",1,2,arguments.length),a=Pc(arguments[0]),n=a.Ng,"firebase"===a.domain&&Oc(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n||Oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.ib||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&P("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),n=new Cc(a.host,a.ib,n,"ws"===a.scheme||"wss"===a.scheme),a=new K(a.ic),i=""+a;var s;if(!(s=!p(n.host)||0===n.host.length||!Nf(n.yb))&&(s=0!==i.length)&&(i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),s=!(p(i)&&0!==i.length&&!Mf.test(i))),s)throw Error(z("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(e)if(e instanceof W)i=e;else{if(!p(e))throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");i=W.Vb(),n.Ld=e}else i=W.Vb();s=""+n;var r=w(i.mc,s);r||(r=new Jh(n,i.Lf),i.mc[s]=r),n=r}Y.call(this,n,a,Yd,!1)}function Lc(t,e){I(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?("undefined"!=typeof console&&("function"==typeof console.log?xb=q(console.log,console):"object"==typeof console.log&&(xb=function(t){console.log(t)})),e&&Bc.set("logging_enabled",!0)):t?xb=t:(xb=null,Bc.remove("logging_enabled"))}var h,aa=this,la=Date.now||function(){return+new Date},ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ea={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},Fa=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Ha;t:{var Ia=aa.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break t}}Ha=""}ma(La,Ka),La.prototype.reset=function(){this.R[0]=1732584193,this.R[1]=4023233417,this.R[2]=2562383102,this.R[3]=271733878,this.R[4]=3285377520,this.$d=this.$b=0},La.prototype.update=function(t,e){if(null!=t){n(e)||(e=t.length);for(var a=e-this.Va,i=0,s=this.ie,r=this.$b;e>i;){if(0==r)for(;a>=i;)Ma(this,t,i),i+=this.Va;
if(p(t)){for(;e>i;)if(s[r]=t.charCodeAt(i),++r,++i,r==this.Va){Ma(this,s),r=0;break}}else for(;e>i;)if(s[r]=t[i],++r,++i,r==this.Va){Ma(this,s),r=0;break}}this.$b=r,this.$d+=e}};var u=Array.prototype,Na=u.indexOf?function(t,e,n){return u.indexOf.call(t,e,n)}:function(t,e,n){if(n=null==n?0:0>n?Math.max(0,t.length+n):n,p(t))return p(e)&&1==e.length?t.indexOf(e,n):-1;for(;t.length>n;n++)if(n in t&&t[n]===e)return n;return-1},Oa=u.forEach?function(t,e,n){u.forEach.call(t,e,n)}:function(t,e,n){for(var a=t.length,i=p(t)?t.split(""):t,s=0;a>s;s++)s in i&&e.call(n,i[s],s,t)},Pa=u.filter?function(t,e,n){return u.filter.call(t,e,n)}:function(t,e,n){for(var a=t.length,i=[],s=0,r=p(t)?t.split(""):t,l=0;a>l;l++)if(l in r){var c=r[l];e.call(n,c,l,t)&&(i[s++]=c)}return i},Qa=u.map?function(t,e,n){return u.map.call(t,e,n)}:function(t,e,n){for(var a=t.length,i=Array(a),s=p(t)?t.split(""):t,r=0;a>r;r++)r in s&&(i[r]=e.call(n,s[r],r,t));return i},Ra=u.reduce?function(t,e,n,a){for(var i=[],s=1,r=arguments.length;r>s;s++)i.push(arguments[s]);return a&&(i[0]=q(e,a)),u.reduce.apply(t,i)}:function(t,e,n,a){var i=n;return Oa(t,function(n,s){i=e.call(a,i,n,s,t)}),i},Sa=u.every?function(t,e,n){return u.every.call(t,e,n)}:function(t,e,n){for(var a=t.length,i=p(t)?t.split(""):t,s=0;a>s;s++)if(s in i&&!e.call(n,i[s],s,t))return!1;return!0},Ya=-1!=Ha.indexOf("Opera")||-1!=Ha.indexOf("OPR"),Za=-1!=Ha.indexOf("Trident")||-1!=Ha.indexOf("MSIE"),$a=-1!=Ha.indexOf("Gecko")&&-1==Ha.toLowerCase().indexOf("webkit")&&!(-1!=Ha.indexOf("Trident")||-1!=Ha.indexOf("MSIE")),ab=-1!=Ha.toLowerCase().indexOf("webkit");(function(){var t,e="";return Ya&&aa.opera?(e=aa.opera.version,ha(e)?e():e):($a?t=/rv\:([^\);]+)(\)|;)/:Za?t=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:ab&&(t=/WebKit\/(\S+)/),t&&(e=(e=t.exec(Ha))?e[1]:""),Za&&(t=(t=aa.document)?t.documentMode:void 0,t>parseFloat(e))?t+"":e)})();var bb=null,cb=null;kb.prototype.j=function(t){return this.Rd.oa(t)},kb.prototype.toString=function(){return""+this.Rd},lb.prototype.jf=function(){return null},lb.prototype.ue=function(){return null};var mb=new lb;nb.prototype.jf=function(t){var e=this.Ja.D;return ob(e,t)?e.j().M(t):(e=null!=this.Hd?new pb(this.Hd,!0,!1):this.Ja.u(),this.Mf.Wa(t,e))},nb.prototype.ue=function(t,e,n){var a=null!=this.Hd?this.Hd:qb(this.Ja);return t=this.Mf.je(a,e,1,n,t),0===t.length?null:t[0]},tb.prototype.add=function(t){this.rd.push(t)},tb.prototype.Yb=function(){return this.qa};var Bb="value";Cb.prototype.Yb=function(){var t=this.Ud.kc();return"value"===this.qd?t.path:t.parent().path},Cb.prototype.ve=function(){return this.qd},Cb.prototype.Tb=function(){return this.qe.Tb(this)},Cb.prototype.toString=function(){return""+this.Yb()+":"+this.qd+":"+B(this.Ud.ff())},Db.prototype.Yb=function(){return this.path},Db.prototype.ve=function(){return"cancel"},Db.prototype.Tb=function(){return this.qe.Tb(this)},Db.prototype.toString=function(){return""+this.path+":cancel"},pb.prototype.j=function(){return this.B},Fb.prototype.get=function(){var t=this.$f.get(),e=xa(t);if(this.zd)for(var n in this.zd)e[n]-=this.zd[n];return this.zd=t,e},Gb.prototype.Cf=function(){var t,e=this.Wd.get(),n={},a=!1;for(t in e)e[t]>0&&v(this.If,t)&&(n[t]=e[t],a=!0);a&&this.ca.Bf(n),setTimeout(q(this.Cf,this),Math.floor(6e5*Math.random()))},Hb.prototype.get=function(){return xa(this.Bc)};var Jb={},Kb={};Rb.prototype.Vc=function(t){return this.path.e()?new Rb(this.source,F,this.Ha.M(t)):new Rb(this.source,G(this.path),this.Ha)},Rb.prototype.toString=function(){return"Operation("+this.path+": "+(""+this.source)+" overwrite: "+(""+this.Ha)+")"},Tb.prototype.Vc=function(){return this.path.e()?this:new Tb(G(this.path),this.Qe)},Tb.prototype.toString=function(){return"Operation("+this.path+": "+(""+this.source)+" ack write revert="+this.Qe+")"},Wb.prototype.Vc=function(){return this.path.e()?new Wb(this.source,F):new Wb(this.source,G(this.path))},Wb.prototype.toString=function(){return"Operation("+this.path+": "+(""+this.source)+" listen_complete)"},h=Yb.prototype,h.Ma=function(t,e){return new Yb(this.Ka,this.xa.Ma(t,e,this.Ka).X(null,null,!1,null,null))},h.remove=function(t){return new Yb(this.Ka,this.xa.remove(t,this.Ka).X(null,null,!1,null,null))},h.get=function(t){for(var e,n=this.xa;!n.e();){if(e=this.Ka(t,n.key),0===e)return n.value;0>e?n=n.left:e>0&&(n=n.right)}return null},h.e=function(){return this.xa.e()},h.count=function(){return this.xa.count()},h.Pc=function(){return this.xa.Pc()},h.ec=function(){return this.xa.ec()},h.ha=function(t){return this.xa.ha(t)},h.Wb=function(t){return new ac(this.xa,null,this.Ka,!1,t)},h.Xb=function(t,e){return new ac(this.xa,t,this.Ka,!1,e)},h.Zb=function(t,e){return new ac(this.xa,t,this.Ka,!0,e)},h.lf=function(t){return new ac(this.xa,null,this.Ka,!0,t)},h=cc.prototype,h.X=function(t,e,n,a,i){return new cc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=a?a:this.left,null!=i?i:this.right)},h.count=function(){return this.left.count()+1+this.right.count()},h.e=function(){return!1},h.ha=function(t){return this.left.ha(t)||t(this.key,this.value)||this.right.ha(t)},h.Pc=function(){return dc(this).key},h.ec=function(){return this.right.e()?this.key:this.right.ec()},h.Ma=function(t,e,n){var a,i;return i=this,a=n(t,i.key),i=0>a?i.X(null,null,null,i.left.Ma(t,e,n),null):0===a?i.X(null,e,null,null,null):i.X(null,null,null,null,i.right.Ma(t,e,n)),ec(i)},h.remove=function(t,e){var n,a;if(n=this,0>e(t,n.key))n.left.e()||n.left.fa()||n.left.left.fa()||(n=gc(n)),n=n.X(null,null,null,n.left.remove(t,e),null);else{if(n.left.fa()&&(n=hc(n)),n.right.e()||n.right.fa()||n.right.left.fa()||(n=ic(n),n.left.left.fa()&&(n=hc(n),n=ic(n))),0===e(t,n.key)){if(n.right.e())return Zb;a=dc(n.right),n=n.X(a.key,a.value,null,null,fc(n.right))}n=n.X(null,null,null,null,n.right.remove(t,e))}return ec(n)},h.fa=function(){return this.color},h=kc.prototype,h.X=function(){return this},h.Ma=function(t,e){return new cc(t,e,null)},h.remove=function(){return this},h.count=function(){return 0},h.e=function(){return!0},h.ha=function(){return!1},h.Pc=function(){return null},h.ec=function(){return null},h.fa=function(){return!1};var Zb=new kc;(function(){var t=process.version;if("v0.10.22"===t||"v0.10.23"===t||"v0.10.24"===t){var e=function(t,e,n){this.chunk=t,this.encoding=e,this.callback=n},n=function(t,n,a,i,s){n.objectMode||!1===n.decodeStrings||"string"!=typeof a||(a=new Buffer(a,i)),Buffer.isBuffer(a)&&(i="buffer");var r=n.objectMode?1:a.length;n.length+=r;var l=n.length<n.highWaterMark;return l||(n.needDrain=!0),n.writing?n.buffer.push(new e(a,i,s)):(n.writelen=r,n.writecb=s,n.writing=!0,n.sync=!0,t._write(a,i,n.onwrite),n.sync=!1),l},a=function(t,e,n,a){var i=!0;if(!Buffer.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!e.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),process.nextTick(function(){a(s)}),i=!1}return i},i=function(t,e){var n=Error("write after end");t.emit("error",n),process.nextTick(function(){e(n)})},t=require("_stream_writable");t.prototype.write=function(t,e,s){var r=this._writableState,l=!1;return"function"==typeof e&&(s=e,e=null),Buffer.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof s&&(s=function(){}),r.ended?i(this,s):a(this,r,t,s)&&(l=n(this,r,t,e,s)),l},require("_stream_duplex").prototype.write=t.prototype.write}})(),h=K.prototype,h.toString=function(){for(var t="",e=this.Y;this.o.length>e;e++)""!==this.o[e]&&(t+="/"+this.o[e]);return t||"/"},h.slice=function(t){return this.o.slice(this.Y+(t||0))},h.parent=function(){if(this.Y>=this.o.length)return null;for(var t=[],e=this.Y;this.o.length-1>e;e++)t.push(this.o[e]);return new K(t,0)},h.w=function(t){for(var e=[],n=this.Y;this.o.length>n;n++)e.push(this.o[n]);if(t instanceof K)for(n=t.Y;t.o.length>n;n++)e.push(t.o[n]);else for(t=t.split("/"),n=0;t.length>n;n++)t[n].length>0&&e.push(t[n]);return new K(e,0)},h.e=function(){return this.Y>=this.o.length},h.Z=function(t){if(rc(this)!==rc(t))return!1;for(var e=this.Y,n=t.Y;this.o.length>=e;e++,n++)if(this.o[e]!==t.o[n])return!1;return!0},h.contains=function(t){var e=this.Y,n=t.Y;if(rc(this)>rc(t))return!1;for(;this.o.length>e;){if(this.o[e]!==t.o[n])return!1;++e,++n}return!0};var F=new K("");tc.prototype.push=function(t){this.Pa.length>0&&(this.Da+=1),this.Pa.push(t),this.Da+=uc(t),vc(this)},tc.prototype.pop=function(){var t=this.Pa.pop();this.Da-=uc(t),this.Pa.length>0&&--this.Da},xc.prototype.set=function(t,e){null==e?delete this.vc[t]:this.vc[t]=e},xc.prototype.get=function(t){return v(this.vc,t)?this.vc[t]:null},xc.prototype.remove=function(t){delete this.vc[t]},xc.prototype.of=!0,h=yc.prototype,h.set=function(t,e){null==e?this.Cc.removeItem(this.Md+t):this.Cc.setItem(this.Md+t,B(e))},h.get=function(t){return t=this.Cc.getItem(this.Md+t),null==t?null:jb(t)},h.remove=function(t){this.Cc.removeItem(this.Md+t)},h.of=!1,h.toString=function(){return""+this.Cc};var Ac=zc("localStorage"),Bc=zc("sessionStorage");Cc.prototype.toString=function(){var t=(this.ib?"https://":"http://")+this.host;return this.Ld&&(t+="<"+this.Ld+">"),t};var Ec=function(){var t=1;return function(){return t++}}(),xb=null,Kc=!0,Yc=/^-?\d{1,10}$/;bd.prototype.bg=function(t,e){if(null==t.Xa||null==e.Xa)throw Fc("Should only compare child_ events.");return this.g.compare(new E(t.Xa,t.Ia),new E(e.Xa,e.Ia))},h=hd.prototype,h.Ef=function(t){return"value"===t},h.createEvent=function(t,e){var n=e.n.g;return new Cb("value",this,new R(t.Ia,e.kc(),n))},h.Tb=function(t){var e=this.pb;if("cancel"===t.ve()){I(this.nb,"Raising a cancel event on a listener with no cancel callback");var n=this.nb;return function(){n.call(e,t.error)}}var a=this.Mb;return function(){a.call(e,t.Ud)}},h.af=function(t,e){return this.nb?new Db(this,t,e):null},h.matches=function(t){return t instanceof hd?t.Mb&&this.Mb?t.Mb===this.Mb&&t.pb===this.pb:!0:!1},h.mf=function(){return null!==this.Mb},h=id.prototype,h.Ef=function(t){return t="children_added"===t?"child_added":t,("children_removed"===t?"child_removed":t)in this.ga},h.af=function(t,e){return this.nb?new Db(this,t,e):null},h.createEvent=function(t,e){I(null!=t.Xa,"Child events should have a childName.");var n=e.kc().w(t.Xa);return new Cb(t.type,this,new R(t.Ia,n,e.n.g),t.Nd)},h.Tb=function(t){var e=this.pb;if("cancel"===t.ve()){I(this.nb,"Raising a cancel event on a listener with no cancel callback");var n=this.nb;return function(){n.call(e,t.error)}}var a=this.ga[t.qd];return function(){a.call(e,t.Ud,t.Nd)}},h.matches=function(t){if(t instanceof id){if(!this.ga||!t.ga)return!0;if(this.pb===t.pb){var e=pa(t.ga);if(e===pa(this.ga)){if(1===e){var e=qa(t.ga),n=qa(this.ga);return!(n!==e||t.ga[e]&&this.ga[n]&&t.ga[e]!==this.ga[n])}return oa(this.ga,function(e,n){return t.ga[n]===e})}}}return!1},h.mf=function(){return null!==this.ga},h=jd.prototype,h.G=function(t,e,n,a,i){return I(t.Gc(this.g),"A node must be indexed if only a child is updated"),a=t.M(e),a.Z(n)?t:(null!=i&&(n.e()?t.Ga(e)?gd(i,new D("child_removed",a,e)):I(t.N(),"A child remove without an old child only makes sense on a leaf node"):a.e()?gd(i,new D("child_added",n,e)):gd(i,new D("child_changed",n,e,a))),t.N()&&n.e()?t:t.Q(e,n).jb(this.g))},h.ta=function(t,e,n){return null!=n&&(t.N()||t.U(M,function(t,a){e.Ga(t)||gd(n,new D("child_removed",a,t))}),e.N()||e.U(M,function(e,a){if(t.Ga(e)){var i=t.M(e);i.Z(a)||gd(n,new D("child_changed",a,e,i))}else gd(n,new D("child_added",a,e))})),e.jb(this.g)},h.da=function(t,e){return t.e()?C:t.da(e)},h.Fa=function(){return!1},h.Ub=function(){return this},h=kd.prototype,h.matches=function(t){return 0>=this.g.compare(this.cd,t)&&0>=this.g.compare(t,this.Dc)},h.G=function(t,e,n,a,i){return this.matches(new E(e,n))||(n=C),this.xe.G(t,e,n,a,i)},h.ta=function(t,e,n){e.N()&&(e=C);var a=e.jb(this.g),a=a.da(C),i=this;return e.U(M,function(t,e){i.matches(new E(t,e))||(a=a.Q(t,C))}),this.xe.ta(t,a,n)},h.da=function(t){return t},h.Fa=function(){return!0},h.Ub=function(){return this.xe},h=pd.prototype,h.G=function(t,e,n,a,i){return this.ra.matches(new E(e,n))||(n=C),t.M(e).Z(n)?t:t.zb()<this.ja?this.ra.Ub().G(t,e,n,a,i):rd(this,t,e,n,a,i)},h.ta=function(t,e,n){var a;if(e.N()||e.e())a=C.jb(this.g);else if(2*this.ja<e.zb()&&e.Gc(this.g)){a=C.jb(this.g),e=this.Fb?e.Zb(this.ra.Dc,this.g):e.Xb(this.ra.cd,this.g);for(var i=0;e.Oa.length>0&&this.ja>i;){var s,r=H(e);if(!(s=this.Fb?0>=this.g.compare(this.ra.cd,r):0>=this.g.compare(r,this.ra.Dc)))break;a=a.Q(r.name,r.S),i++}}else{a=e.jb(this.g),a=a.da(C);var l,c,o;if(this.Fb){e=a.lf(this.g),l=this.ra.Dc,c=this.ra.cd;var h=td(this.g);o=function(t,e){return h(e,t)}}else e=a.Wb(this.g),l=this.ra.cd,c=this.ra.Dc,o=td(this.g);for(var i=0,p=!1;e.Oa.length>0;)r=H(e),!p&&0>=o(l,r)&&(p=!0),(s=p&&this.ja>i&&0>=o(r,c))?i++:a=a.Q(r.name,C)}return this.ra.Ub().ta(t,a,n)},h.da=function(t){return t},h.Fa=function(){return!0},h.Ub=function(){return this.ra.Ub()},xd.prototype.ab=function(t,e,n,a){var i,s=new fd;if(e.type===Sb)e.source.se?n=yd(this,t,e.path,e.Ha,n,a,s):(I(e.source.hf,"Unknown source."),i=e.source.We,n=zd(this,t,e.path,e.Ha,n,a,i,s));else if(e.type===Ad)e.source.se?n=Bd(this,t,e.path,e.children,n,a,s):(I(e.source.hf,"Unknown source."),i=e.source.We,n=Cd(this,t,e.path,e.children,n,a,i,s));else if(e.type===Ub)if(e.Qe)if(i=e.path,null!=n.rc(i))n=t;else{if(e=new nb(n,t,a),a=t.D.j(),i.e()||".priority"===O(i))Eb(t.u())?e=n.ua(qb(t)):(e=t.u().j(),I(e instanceof S,"serverChildren would be complete if leaf node"),e=n.wc(e)),e=this.I.ta(a,e,s);else{i=O(i);var r=n.Wa(i,t.u());null==r&&ob(t.u(),i)&&(r=a.M(i)),e=null!=r?this.I.G(a,i,r,e,s):t.D.j().Ga(i)?this.I.G(a,i,C,e,s):a,e.e()&&Eb(t.u())&&(a=n.ua(qb(t)),a.N()&&(e=this.I.ta(e,a,s)))}a=Eb(t.u())||null!=n.rc(F),n=Dd(t,e,a,this.I.Fa())}else n=Ed(this,t,e.path,n,a,s);else{if(e.type!==Xb)throw Fc("Unknown operation type: "+e.type);a=e.path,e=t.u(),i=e.j(),r=e.$||a.e(),n=Fd(this,new Gd(t.D,new pb(i,r,e.Sb)),a,n,mb,s)}return s=ra(s.bb),a=n,e=a.D,e.$&&(i=e.j().N()||e.j().e(),r=Hd(t),(s.length>0||!t.D.$||i&&!e.j().Z(r)||!e.j().A().Z(r.A()))&&s.push(Ab(Hd(a)))),new wd(n,s)};var Nd={};Md.prototype.wd=function(t,e){return 0!==this.compare(new E("[MIN_NAME]",t),new E("[MIN_NAME]",e))},Md.prototype.Qc=function(){return Od},ma(Pd,Md),h=Pd.prototype,h.Fc=function(t){return!t.M(this.bc).e()},h.compare=function(t,e){var n=t.S.M(this.bc),a=e.S.M(this.bc),n=n.Ac(a);return 0===n?Pb(t.name,e.name):n},h.Mc=function(t,e){var n=L(t),n=C.Q(this.bc,n);return new E(e,n)},h.Nc=function(){var t=C.Q(this.bc,Qd);return new E("[MAX_NAME]",t)},h.toString=function(){return this.bc},ma(Rd,Md),h=Rd.prototype,h.compare=function(t,e){var n=t.S.A(),a=e.S.A(),n=n.Ac(a);return 0===n?Pb(t.name,e.name):n},h.Fc=function(t){return!t.A().e()},h.wd=function(t,e){return!t.A().Z(e.A())},h.Qc=function(){return Od},h.Nc=function(){return new E("[MAX_NAME]",new qc("[PRIORITY-POST]",Qd))},h.Mc=function(t,e){var n=L(t);return new E(e,new qc("[PRIORITY-POST]",n))},h.toString=function(){return".priority"};var M=new Rd;ma(Sd,Md),h=Sd.prototype,h.compare=function(t,e){return Pb(t.name,e.name)},h.Fc=function(){throw Fc("KeyIndex.isDefinedOn not expected to be called.")},h.wd=function(){return!1},h.Qc=function(){return Od},h.Nc=function(){return new E("[MAX_NAME]",C)},h.Mc=function(t){return I(p(t),"KeyIndex indexValue must always be a string."),new E(t,C)},h.toString=function(){return".key"};var Td=new Sd;ma(Ud,Md),h=Ud.prototype,h.compare=function(t,e){var n=t.S.Ac(e.S);return 0===n?Pb(t.name,e.name):n},h.Fc=function(){return!0},h.wd=function(t,e){return!t.Z(e)},h.Qc=function(){return Od},h.Nc=function(){return Vd},h.Mc=function(t,e){var n=L(t);return new E(e,n)},h.toString=function(){return".value"};var Wd=new Ud,Yd=new Xd;h=Xd.prototype,h.Ce=function(t){var e=Zd(this);return e.ia=!0,e.ja=t,e.Kb="",e},h.De=function(t){var e=Zd(this);return e.ia=!0,e.ja=t,e.Kb="l",e},h.Ee=function(t){var e=Zd(this);return e.ia=!0,e.ja=t,e.Kb="r",e},h.Vd=function(t,e){var a=Zd(this);return a.la=!0,n(t)||(t=null),a.dc=t,null!=e?(a.Ib=!0,a.tb=e):(a.Ib=!1,a.tb=""),a},h.pd=function(t,e){var a=Zd(this);return a.na=!0,n(t)||(t=null),a.ac=t,n(e)?(a.Qb=!0,a.rb=e):(a.Yg=!1,a.rb=""),a},h.toString=function(){return B(ae(this))},de.prototype.get=function(t){var e=w(this.xd,t);if(!e)throw Error("No index defined for "+t);return e===Nd?null:e};var he=new de({".priority":Nd},{".priority":M});h=qc.prototype,h.N=function(){return!0},h.A=function(){return this.ba},h.da=function(t){return new qc(this.C,t)},h.M=function(t){return".priority"===t?this.ba:C},h.oa=function(t){return t.e()?this:".priority"===O(t)?this.ba:C},h.Ga=function(){return!1},h.kf=function(){return null},h.Q=function(t,e){return".priority"===t?this.da(e):e.e()&&".priority"!==t?this:C.Q(t,e).da(this.ba)},h.G=function(t,e){var n=O(t);return null===n?e:e.e()&&".priority"!==n?this:(I(".priority"!==n||1===rc(t),".priority must be the last token in a path"),this.Q(n,C.G(G(t),e)))},h.e=function(){return!1},h.zb=function(){return 0},h.K=function(t){return t&&!this.A().e()?{".value":this.Ba(),".priority":this.A().K()}:this.Ba()},h.hash=function(){if(null===this.xb){var t="";this.ba.e()||(t+="priority:"+je(this.ba.K())+":");var e=typeof this.C,t=t+(e+":"),t="number"===e?t+Xc(this.C):t+this.C;this.xb=Hc(t)}return this.xb},h.Ba=function(){return this.C},h.Ac=function(t){if(t===C)return 1;if(t instanceof S)return-1;I(t.N(),"Unknown node type");var e=typeof t.C,n=typeof this.C,a=Na(ke,e),i=Na(ke,n);return I(a>=0,"Unknown leaf type: "+e),I(i>=0,"Unknown leaf type: "+n),a===i?"object"===n?0:this.C<t.C?-1:this.C===t.C?0:1:i-a};var ke=["object","boolean","number","string"];qc.prototype.jb=function(){return this},qc.prototype.Gc=function(){return!0},qc.prototype.Z=function(t){return t===this?!0:t.N()?this.C===t.C&&this.ba.Z(t.ba):!1},qc.prototype.toString=function(){return B(this.K(!0))},h=S.prototype,h.N=function(){return!1},h.A=function(){return this.ba||C},h.da=function(t){return this.m.e()?this:new S(this.m,t,this.sb)},h.M=function(t){return".priority"===t?this.A():(t=this.m.get(t),null===t?C:t)},h.oa=function(t){var e=O(t);return null===e?this:this.M(e).oa(G(t))},h.Ga=function(t){return null!==this.m.get(t)},h.Q=function(t,e){if(I(e,"We should always be passing snapshot nodes"),".priority"===t)return this.da(e);var n,a,i=new E(t,e);return e.e()?(n=this.m.remove(t),i=ge(this.sb,i,this.m)):(n=this.m.Ma(t,e),i=ee(this.sb,i,this.m)),a=n.e()?C:this.ba,new S(n,a,i)},h.G=function(t,e){var n=O(t);if(null===n)return e;I(".priority"!==O(t)||1===rc(t),".priority must be the last token in a path");var a=this.M(n).G(G(t),e);return this.Q(n,a)},h.e=function(){return this.m.e()},h.zb=function(){return this.m.count()};var le=/^(0|[1-9]\d*)$/;h=S.prototype,h.K=function(t){if(this.e())return null;var e={},n=0,a=0,i=!0;if(this.U(M,function(s,r){e[s]=r.K(t),n++,i&&le.test(s)?a=Math.max(a,Number(s)):i=!1}),!t&&i&&2*n>a){var s,r=[];for(s in e)r[s]=e[s];return r}return t&&!this.A().e()&&(e[".priority"]=this.A().K()),e},h.hash=function(){if(null===this.xb){var t="";this.A().e()||(t+="priority:"+je(this.A().K())+":"),this.U(M,function(e,n){var a=n.hash();""!==a&&(t+=":"+e+":"+a)}),this.xb=""===t?"":Hc(t)}return this.xb},h.kf=function(t,e,n){return(n=me(this,n))?(t=$b(n,new E(t,e)))?t.name:null:$b(this.m,t)},h.U=function(t,e){var n=me(this,t);return n?n.ha(function(t){return e(t.name,t.S)}):this.m.ha(e)},h.Wb=function(t){return this.Xb(t.Qc(),t)},h.Xb=function(t,e){var n=me(this,e);if(n)return n.Xb(t,function(t){return t});for(var n=this.m.Xb(t.name,Nb),a=bc(n);null!=a&&0>e.compare(a,t);)H(n),a=bc(n);return n},h.lf=function(t){return this.Zb(t.Nc(),t)},h.Zb=function(t,e){var n=me(this,e);if(n)return n.Zb(t,function(t){return t});for(var n=this.m.Zb(t.name,Nb),a=bc(n);null!=a&&e.compare(a,t)>0;)H(n),a=bc(n);return n},h.Ac=function(t){return this.e()?t.e()?0:-1:t.N()||t.e()?1:t===Qd?-1:0},h.jb=function(t){if(t===Td||ta(this.sb.cc,""+t))return this;var e=this.sb,n=this.m;I(t!==Td,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var a=[],i=!1,n=n.Wb(Nb),s=H(n);s;)i=i||t.Fc(s.S),a.push(s),s=H(n);return a=i?fe(a,td(t)):Nd,i=""+t,n=xa(e.cc),n[i]=t,t=xa(e.xd),t[i]=a,new S(this.m,this.ba,new de(t,n))},h.Gc=function(t){return t===Td||ta(this.sb.cc,""+t)},h.Z=function(t){if(t===this)return!0;if(t.N())return!1;if(this.A().Z(t.A())&&this.m.count()===t.m.count()){var e=this.Wb(M);t=t.Wb(M);for(var n=H(e),a=H(t);n&&a;){if(n.name!==a.name||!n.S.Z(a.S))return!1;n=H(e),a=H(t)}return null===n&&null===a}return!1},h.toString=function(){return B(this.K(!0))};var ne=Math.log(2),C=new S(new Yb(Qb),null,he);ma(qe,S),h=qe.prototype,h.Ac=function(t){return t===this?0:1},h.Z=function(t){return t===this},h.A=function(){return this},h.M=function(){return C},h.e=function(){return!1};var Qd=new qe,Od=new E("[MIN_NAME]",C),Vd=new E("[MAX_NAME]",Qd);Gd.prototype.u=function(){return this.Sd},h=re.prototype,h.u=function(){return this.Ja.u().j()},h.eb=function(t){var e=qb(this.Ja);return e&&(be(this.V.n)||!t.e()&&!e.M(O(t)).e())?e.oa(t):null},h.e=function(){return 0===this.Ya.length},h.Lb=function(t){this.Ya.push(t)},h.hb=function(t,e){var n=[];if(e){I(null==t,"A cancel should cancel all event registrations.");var a=this.V.path;Oa(this.Ya,function(t){(t=t.af(e,a))&&n.push(t)})}if(t){for(var i=[],s=0;this.Ya.length>s;++s){var r=this.Ya[s];if(r.matches(t)){if(t.mf()){i=i.concat(this.Ya.slice(s+1));break}}else i.push(r)}this.Ya=i}else this.Ya=[];return n},h.ab=function(t,e,n){t.type===Ad&&null!==t.source.Eb&&(I(qb(this.Ja),"We should always have a full cache before handling merges"),I(Hd(this.Ja),"Missing event cache, even though we have a server cache"));var a=this.Ja;return t=this.Af.ab(a,t,e,n),e=this.Af,n=t.ee,I(n.D.j().Gc(e.I.g),"Event snap not indexed"),I(n.u().j().Gc(e.I.g),"Server snap not indexed"),I(Eb(t.ee.u())||!Eb(a.u()),"Once a server snap is complete, it should never go back"),this.Ja=t.ee,te(this,t.Zf,t.ee.D.j(),null)},ve.prototype.Vc=function(t){return this.path.e()?(t=this.children.subtree(new K(t)),t.e()?null:t.value?new Rb(this.source,F,t.value):new ve(this.source,F,t)):(I(O(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ve(this.source,G(this.path),this.children))},ve.prototype.toString=function(){return"Operation("+this.path+": "+(""+this.source)+" merge: "+(""+this.children)+")"};var Sb=0,Ad=1,Ub=2,Xb=3,Vb=new we(!0,!1,null,!1),xe=new we(!1,!0,null,!1);we.prototype.toString=function(){return this.se?"user":this.We?"server(queryID="+this.Eb+")":"server"},h=ye.prototype,h.pf=function(t,e,n,a){var i=""+t.path;this.f("Listen called for "+i+" "+t.wa());var s=ze(t,n),r={};this.aa[s]=r,t=ce(t.n);var l=this;Ae(this,i+".json",t,function(t,e){var c=e;404===t&&(t=c=null),null===t&&l.Cb(i,c,!1,n),w(l.aa,s)===r&&a(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},h.Kf=function(t,e){var n=ze(t,e);delete this.aa[n]},h.P=function(t,e){this.Ea=t;var n=Zc(t),a=n.data,n=n.zc&&n.zc.exp;e&&e("ok",{auth:a,expires:n})},h.ce=function(t){this.Ea=null,t("ok",null)},h.Ie=function(){},h.wf=function(){},h.Gd=function(){},h.put=function(){},h.qf=function(){},h.Bf=function(){};var Ce=new Yb(function(t,e){return t===e?0:e>t?-1:1});h=Be.prototype,h.e=function(){return null===this.value&&this.children.e()},h.subtree=function(t){if(t.e())return this;var e=this.children.get(O(t));return null!==e?e.subtree(G(t)):Ld},h.set=function(t,e){if(t.e())return new Be(e,this.children);var n=O(t),a=(this.children.get(n)||Ld).set(G(t),e),n=this.children.Ma(n,a);return new Be(this.value,n)},h.remove=function(t){if(t.e())return this.children.e()?Ld:new Be(null,this.children);var e=O(t),n=this.children.get(e);return n?(t=n.remove(G(t)),e=t.e()?this.children.remove(e):this.children.Ma(e,t),null===this.value&&e.e()?Ld:new Be(this.value,e)):this},h.get=function(t){if(t.e())return this.value;var e=this.children.get(O(t));return e?e.get(G(t)):null};var Ld=new Be(null);Be.prototype.toString=function(){var t={};return Id(this,function(e,n){t[""+e]=""+n}),B(t)};var Pe=new Oe(new Be(null));Oe.prototype.Od=function(t){return t.e()?Pe:(t=Kd(this.W,t,Ld),new Oe(t))},Oe.prototype.e=function(){return this.W.e()},Oe.prototype.apply=function(t){return Ve(F,this.W,t)},h=We.prototype,h.Od=function(t){var e=Ua(this.za,function(e){return e.fe===t});I(e>=0,"removeWrite called with nonexistent writeId.");var n=this.za[e];this.za.splice(e,1);for(var a=n.visible,i=!1,s=this.za.length-1;a&&s>=0;){var l=this.za[s];l.visible&&(s>=e&&Xe(l,n.path)?a=!1:n.path.contains(l.path)&&(i=!0)),s--}if(a){if(i)this.T=Ye(this.za,Ze,F),this.Jc=this.za.length>0?this.za[this.za.length-1].fe:-1;else if(n.Ha)this.T=this.T.Od(n.path);else{var c=this;r(n.children,function(t,e){c.T=c.T.Od(n.path.w(e))})}return n.path}return null},h.ua=function(t,e,n,a){if(n||a){var i=Ue(this.T,t);return!a&&i.e()?e:a||null!=e||null!=Se(i,F)?(i=Ye(this.za,function(e){return!(!e.visible&&!a||n&&Na(n,e.fe)>=0||!e.path.contains(t)&&!t.contains(e.path))},t),e=e||C,i.apply(e)):null}return i=Se(this.T,t),null!=i?i:(i=Ue(this.T,t),i.e()?e:null!=e||null!=Se(i,F)?(e=e||C,i.apply(e)):null)},h.wc=function(t,e){var n=C,a=Se(this.T,t);if(a)a.N()||a.U(M,function(t,e){n=n.Q(t,e)});else if(e){var i=Ue(this.T,t);e.U(M,function(t,e){var a=Ue(i,new K(t)).apply(e);n=n.Q(t,a)}),Oa(Te(i),function(t){n=n.Q(t.name,t.S)})}else i=Ue(this.T,t),Oa(Te(i),function(t){n=n.Q(t.name,t.S)});return n},h.gd=function(t,e,n,a){return I(n||a,"Either existingEventSnap or existingServerSnap must exist"),t=t.w(e),null!=Se(this.T,t)?null:(t=Ue(this.T,t),t.e()?a.oa(e):t.apply(a.oa(e)))},h.Wa=function(t,e,n){t=t.w(e);var a=Se(this.T,t);return null!=a?a:ob(n,e)?Ue(this.T,t).apply(n.j().M(e)):null},h.rc=function(t){return Se(this.T,t)},h.je=function(t,e,n,a,i,s){var r;if(t=Ue(this.T,t),r=Se(t,F),null==r){if(null==e)return[];r=t.apply(e)}if(r=r.jb(s),r.e()||r.N())return[];for(e=[],t=td(s),i=i?r.Zb(n,s):r.Xb(n,s),s=H(i);s&&a>e.length;)0!==t(s,n)&&e.push(s),s=H(i);return e},h=$e.prototype,h.ua=function(t,e,n){return this.W.ua(this.Jb,t,e,n)},h.wc=function(t){return this.W.wc(this.Jb,t)},h.gd=function(t,e,n){return this.W.gd(this.Jb,t,e,n)},h.rc=function(t){return this.W.rc(this.Jb.w(t))},h.je=function(t,e,n,a,i){return this.W.je(this.Jb,t,e,n,a,i)},h.Wa=function(t,e){return this.W.Wa(this.Jb,t,e)},h.w=function(t){return new $e(this.Jb.w(t),this.W)},h=af.prototype,h.e=function(){return wa(this.ya)},h.ab=function(t,e,n){var a=t.source.Eb;if(null!==a)return a=w(this.ya,a),I(null!=a,"SyncTree gave us an op for an invalid query."),a.ab(t,e,n);var i=[];return r(this.ya,function(a){i=i.concat(a.ab(t,e,n))}),i},h.Lb=function(t,e,n,a,i){var s=t.wa(),r=w(this.ya,s);if(!r){var r=n.ua(i?a:null),l=!1;r?l=!0:(r=a instanceof S?n.wc(a):C,l=!1),r=new re(t,new Gd(new pb(r,l,!1),new pb(a,i,!1))),this.ya[s]=r}return r.Lb(e),ue(r,e)},h.hb=function(t,e,n){var a=t.wa(),i=[],s=[],l=null!=bf(this);if("default"===a){var c=this;r(this.ya,function(t,a){s=s.concat(t.hb(e,n)),t.e()&&(delete c.ya[a],be(t.V.n)||i.push(t.V))})}else{var o=w(this.ya,a);o&&(s=s.concat(o.hb(e,n)),o.e()&&(delete this.ya[a],be(o.V.n)||i.push(o.V)))}return l&&null==bf(this)&&i.push(new T(t.k,t.path)),{Eg:i,gg:s}},h.eb=function(t){var e=null;return r(this.ya,function(n){e=e||n.eb(t)}),e},ef.prototype.Lb=function(t,e){var n=t.path,a=null,i=!1;Ke(this.sa,n,function(t,e){var s=N(t,n);return a=e.eb(s),i=i||null!=bf(e),!a});var s=this.sa.get(n);s?(i=i||null!=bf(s),a=a||s.eb(F)):(s=new af,this.sa=this.sa.set(n,s));var r;null!=a?r=!0:(r=!1,a=C,Ne(this.sa.subtree(n),function(t,e){var n=e.eb(F);n&&(a=a.Q(t,n))}));var l=null!=df(s,t);if(!l&&!be(t.n)){var c=qf(t);I(!(c in this.jc),"View does not exist, but we have a tag");var o=rf++;this.jc[c]=o,this.Ve["_"+o]=c}return r=s.Lb(t,e,new $e(n,this.Db),a,r),l||i||(s=df(s,t),r=r.concat(sf(this,t,s))),r},ef.prototype.hb=function(t,e,n){var a=t.path,i=this.sa.get(a),s=[];if(i&&("default"===t.wa()||null!=df(i,t))){s=i.hb(t,e,n),i.e()&&(this.sa=this.sa.remove(a)),i=s.Eg,s=s.gg,e=-1!==Ua(i,function(t){return be(t.n)});var r=Ie(this.sa,a,function(t,e){return null!=bf(e)});if(e&&!r&&(a=this.sa.subtree(a),!a.e()))for(var a=tf(a),l=0;a.length>l;++l){var c=a[l],o=c.V,c=uf(this,c);this.Kc.Se(o,vf(this,o),c.td,c.J)}if(!r&&i.length>0&&!n)if(e)this.Kc.Xd(t,null);else{var h=this;Oa(i,function(t){t.wa();var e=h.jc[qf(t)];h.Kc.Xd(t,e)})}wf(this,i)}return s},ef.prototype.ua=function(t,e){var n=this.Db,a=Ie(this.sa,t,function(e,n){var a=N(e,t);return(a=n.eb(a))?a:void 0});return n.ua(t,a,e,!0)};var rf=1;h=Af.prototype,h.Ba=function(){return this.B.value},h.clear=function(){this.B.value=null,this.B.children={},this.B.jd=0,Df(this)},h.sd=function(){return this.B.jd>0},h.e=function(){return null===this.Ba()&&!this.sd()},h.U=function(t){var e=this;r(this.B.children,function(n,a){t(new Af(a,e,n))})},h.path=function(){return new K(null===this.Xc?this.Dd:this.Xc.path()+"/"+this.Dd)},h.name=function(){return this.Dd},h.parent=function(){return this.Xc},Gf.prototype.be=function(t){for(var e=this.Lc[t]||[],n=0;e.length>n;n++)e[n].xc.apply(e[n].La,Array.prototype.slice.call(arguments,1))},Gf.prototype.Ab=function(t,e,n){Hf(this,t),this.Lc[t]=this.Lc[t]||[],this.Lc[t].push({xc:e,La:n}),(t=this.we(t))&&e.apply(n,t)},Gf.prototype.fc=function(t,e,n){Hf(this,t),t=this.Lc[t]||[];for(var a=0;t.length>a;a++)if(t[a].xc===e&&(!n||n===t[a].La)){t.splice(a,1);break}};var If=function(){var t=0,e=[];return function(n){var a=n===t;t=n;for(var i=Array(8),s=7;s>=0;s--)i[s]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(n%64),n=Math.floor(n/64);if(I(0===n,"Cannot push at time == 0"),n=i.join(""),a){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;12>s;s++)e[s]=Math.floor(64*Math.random());for(s=0;12>s;s++)n+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(e[s]);return I(20===n.length,"nextPushId: Length should be 20."),n}}();ma(Jf,Gf),Jf.prototype.we=function(t){return I("online"===t,"Unknown event type: "+t),[this.Uc]},ca(Jf),ma(Kf,Gf),Kf.prototype.we=function(t){return I("visible"===t,"Unknown event type: "+t),[this.tc]},ca(Kf);var Lf=/[\[\].#$\/\u0000-\u001F\u007F]/,Mf=/[\[\].#$\u0000-\u001F\u007F]/;h=ag.prototype,h.add=function(t,e){this.set[t]=null!==e?e:!0},h.contains=function(t){return v(this.set,t)},h.get=function(t){return this.contains(t)?this.set[t]:void 0},h.remove=function(t){delete this.set[t]},h.clear=function(){this.set={}},h.e=function(){return wa(this.set)},h.count=function(){return pa(this.set)},h.keys=function(){var t=[];return r(this.set,function(e,n){t.push(n)}),t},nc.prototype.find=function(t){if(null!=this.C)return this.C.oa(t);if(t.e()||null==this.m)return null;var e=O(t);return t=G(t),this.m.contains(e)?this.m.get(e).find(t):null},nc.prototype.lc=function(t,e){if(t.e())this.C=e,this.m=null;else if(null!==this.C)this.C=this.C.G(t,e);else{null==this.m&&(this.m=new ag);var n=O(t);this.m.contains(n)||this.m.add(n,new nc),n=this.m.get(n),t=G(t),n.lc(t,e)}},nc.prototype.U=function(t){null!==this.m&&bg(this.m,function(e,n){t(e,n)})};var dg="auth.firebase.com",fg=["remember","redirectTo"];hg.prototype.set=function(t,e){if(!e){if(!this.Yd.length)throw Error("fb.login.SessionManager : No storage options available!");e=this.Yd[0]}e.set(this.Me,t)},hg.prototype.get=function(){var t=Qa(this.Yd,q(this.kg,this)),t=Pa(t,function(t){return null!==t});return Wa(t,function(t,e){return $c(e.token)-$c(t.token)}),t.length>0?t.shift():null},hg.prototype.kg=function(t){try{var e=t.get(this.Me);if(e&&e.token)return e}catch(n){}return null},hg.prototype.clear=function(){var t=this;Oa(this.Yd,function(e){e.remove(t.Me)})},qg.prototype.gc=function(t){var e,n=this;try{e=jb(t.data)}catch(a){}e&&"request"===e.a&&(lg(window,"message",this.gc),this.Zd=t.origin,this.yc&&setTimeout(function(){n.yc(n.Zd,e.d,function(t,e){n.Xf=!e,n.yc=void 0,rg(n,{a:"response",d:t,forceKeepWindowOpen:e})})},0))},qg.prototype.ug=function(){try{lg(this.vd,"message",this.uf)}catch(t){}this.yc&&(rg(this,{a:"error",d:"unknown closed window"}),this.yc=void 0);try{window.close()}catch(e){}},qg.prototype.uf=function(t){if(this.Xf&&"die"===t.data)try{window.close()
}catch(e){}},sg.prototype.open=function(t,e){Bc.set("redirect_request_id",this.nc),Bc.set("redirect_request_id",this.nc),e.requestId=this.nc,e.redirectTo=e.redirectTo||window.location.href,t+=(/\?/.test(t)?"":"?")+gb(e),window.location=t},sg.isAvailable=function(){return!1},sg.prototype.Nb=function(){return"redirect"};var tg={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};ug.prototype.open=function(t,e,n){function a(t){if(s&&(document.body.removeChild(s),s=void 0),h&&(h=clearInterval(h)),lg(window,"message",i),lg(window,"unload",a),o&&!t)try{o.close()}catch(e){r.postMessage("die",c)}o=r=void 0}function i(t){if(t.origin===c)try{var e=jb(t.data);"ready"===e.a?r.postMessage(p,c):"error"===e.a?(a(!1),n&&(n(e.d),n=null)):"response"===e.a&&(a(e.forceKeepWindowOpen),n&&(n(null,e.d),n=null))}catch(i){}}var s,r,l=ig();if(!this.options.relay_url)return n(Error("invalid arguments: origin of url and relay_url must match"));var c=mg(t);if(c!==mg(this.options.relay_url))n&&setTimeout(function(){n(Error("invalid arguments: origin of url and relay_url must match"))},0);else{l&&(s=document.createElement("iframe"),s.setAttribute("src",this.options.relay_url),s.style.display="none",s.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(s),r=s.contentWindow),t+=(/\?/.test(t)?"":"?")+gb(e);var o=window.open(t,this.options.window_name,this.options.window_features);r||(r=o);var h=setInterval(function(){o&&o.closed&&(a(!1),n&&(n(U("USER_CANCELLED")),n=null))},500),p=B({a:"request",d:e});kg(window,"unload",a),kg(window,"message",i)}},ug.isAvailable=function(){return!1},ug.prototype.Nb=function(){return"popup"},vg.prototype.open=function(t,e,n){var a=Pc(t),i="http"===a.scheme?require("http"):require("https");t=this.options.method;var s,r={Accept:"application/json;text/plain"};if(za(r,this.options.headers),a={host:a.host.split(":")[0],port:a.port,path:a.ic,method:this.options.method.toUpperCase()},"GET"===t)a.path+=(/\?/.test(a.path)?"":"?")+gb(e),s=null;else{var l=this.options.headers.content_type;"application/json"===l&&(s=B(e)),"application/x-www-form-urlencoded"===l&&(s=gb(e)),r["Content-Length"]=Buffer.byteLength(s,"utf8")}a.headers=r,e=i.request(a,function(t){var e="";t.setEncoding("utf8"),t.on("data",function(t){e+=t}),t.on("end",function(){try{e=jb(e+"")}catch(t){}n&&(n(null,e),n=null)})}),"GET"!==t&&e.write(s),e.on("error",function(t){t&&t.code&&("ENOTFOUND"===t.code||"ENETDOWN"===t.code)?n(U("NETWORK_ERROR")):n(U("SERVER_ERROR")),n=null}),e.end()},vg.isAvailable=function(){return!0},vg.prototype.Nb=function(){return"json"},wg.prototype.open=function(t,e,n){function a(){n&&(n(U("REQUEST_INTERRUPTED")),n=null)}var i,s=new XMLHttpRequest,r=this.options.method.toUpperCase();if(kg(window,"beforeunload",a),s.onreadystatechange=function(){if(n&&4===s.readyState){var t;if(s.status>=200&&300>s.status){try{t=jb(s.responseText)}catch(e){}n(null,t)}else s.status>=500&&600>s.status?n(U("SERVER_ERROR")):n(U("NETWORK_ERROR"));n=null,lg(window,"beforeunload",a)}},"GET"===r)t+=(/\?/.test(t)?"":"?")+gb(e),i=null;else{var l=this.options.headers.content_type;"application/json"===l&&(i=B(e)),"application/x-www-form-urlencoded"===l&&(i=gb(e))}s.open(r,t,!0),t={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"},za(t,this.options.headers);for(var c in t)s.setRequestHeader(c,t[c]);s.send(i)},wg.isAvailable=function(){return!1},wg.prototype.Nb=function(){return"json"},xg.prototype.open=function(t,e,n){function a(){n&&(n(U("USER_CANCELLED")),n=null)}var i,s=this,r=Pc(dg);e.requestId=this.nc,e.redirectTo=r.scheme+"://"+r.host+"/blank/page.html",t+=/\?/.test(t)?"":"?",t+=gb(e),(i=window.open(t,"_blank","location=no"))&&ha(i.addEventListener)?(i.addEventListener("loadstart",function(t){var e;if(e=t&&t.url)t:{try{var l=document.createElement("a");l.href=t.url,e=l.host===r.host&&"/blank/page.html"===l.pathname;break t}catch(c){}e=!1}e&&(t=ng(t.url),i.removeEventListener("exit",a),i.close(),t=new eg(null,null,{requestId:s.nc,requestKey:t}),s.yf.requestWithCredential("/auth/session",t,n),n=null)}),i.addEventListener("exit",a)):n(U("TRANSPORT_UNAVAILABLE"))},xg.isAvailable=function(){return!1},xg.prototype.Nb=function(){return"redirect"},yg.prototype.open=function(t,e,n){function a(){n&&(n(U("REQUEST_INTERRUPTED")),n=null)}function i(){setTimeout(function(){window.__firebase_auth_jsonp[s]=void 0,wa(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var t=document.getElementById(s);t&&t.parentNode.removeChild(t)}catch(e){}},1),lg(window,"beforeunload",a)}var s="fn"+(new Date).getTime()+Math.floor(99999*Math.random());e[this.options.callback_parameter]="__firebase_auth_jsonp."+s,t+=(/\?/.test(t)?"":"?")+gb(e),kg(window,"beforeunload",a),window.__firebase_auth_jsonp[s]=function(t){n&&(n(null,t),n=null),i()},zg(s,t,n)},yg.isAvailable=function(){return!1},yg.prototype.Nb=function(){return"json"},ma(Ag,Gf),h=Ag.prototype,h.te=function(){return this.kb||null},h.oe=function(t,e){Jg(this);var n=gg(t);n.$a._method="POST",this.oc("/users",n,function(t,n){t?Q(e,t):Q(e,t,n)})},h.Oe=function(t,e){var n=this;Jg(this);var a="/users/"+encodeURIComponent(t.email),i=gg(t);i.$a._method="DELETE",this.oc(a,i,function(t,a){!t&&a&&a.uid&&n.kb&&n.kb.uid&&n.kb.uid===a.uid&&Hg(n),Q(e,t)})},h.le=function(t,e){Jg(this);var n="/users/"+encodeURIComponent(t.email)+"/password",a=gg(t);a.$a._method="PUT",a.$a.password=t.newPassword,this.oc(n,a,function(t){Q(e,t)})},h.ke=function(t,e){Jg(this);var n="/users/"+encodeURIComponent(t.oldEmail)+"/email",a=gg(t);a.$a._method="PUT",a.$a.email=t.newEmail,a.$a.password=t.password,this.oc(n,a,function(t){Q(e,t)})},h.Pe=function(t,e){Jg(this);var n="/users/"+encodeURIComponent(t.email)+"/password",a=gg(t);a.$a._method="POST",this.oc(n,a,function(t){Q(e,t)})},h.oc=function(t,e,n){Mg(this,[vg],t,e,n)},h.we=function(t){return I("auth_status"===t,'initial event must be of type "auth_status"'),[this.kb]};var Rg,Sg;Qg.prototype.open=function(t,e){this.bf=0,this.ka=e,this.tf=new Ng(t),this.vb=!1;var n=this;this.ob=setTimeout(function(){n.f("Timed out trying to connect."),n.fb(),n.ob=null},Math.floor(3e4)),Rc(function(){if(!n.vb){n.Sa=new Tg(function(t,e,a){if(Ug(n,arguments),n.Sa)if(n.ob&&(clearTimeout(n.ob),n.ob=null),n.Ec=!0,"start"==t)n.id=e,n.Bg=a;else{if("close"!==t)throw Error("Unrecognized command received: "+t);e?(n.Sa.Hf=!1,Og(n.tf,e,function(){n.fb()})):n.fb()}},function(t,e){Ug(n,arguments),Pg(n.tf,t,e)},function(){n.fb()},n.fd);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.Sa.Qg&&(t.cb=n.Sa.Qg),t.v="5",n.Td&&(t.s=n.Td),t=n.fd(t),n.f("Connecting via long-poll to "+t),Vg(n.Sa,t,function(){})}})},Qg.prototype.start=function(){var t=this.Sa,e=this.Bg;for(t.Fe=this.id,t.sf=e,t.he=!0;Wg(t););},Qg.isAvailable=function(){return!(Sg||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.Sg||!Rg)},h=Qg.prototype,h.Ad=function(){},h.bd=function(){this.vb=!0,this.Sa&&(this.Sa.close(),this.Sa=null),this.rf&&(document.body.removeChild(this.rf),this.rf=null),this.ob&&(clearTimeout(this.ob),this.ob=null)},h.fb=function(){this.vb||(this.f("Longpoll is closing itself"),this.bd(),this.ka&&(this.ka(this.Ec),this.ka=null))},h.close=function(){this.vb||(this.f("Longpoll is being closed."),this.bd())},h.send=function(t){t=B(t),this.mb+=t.length,Ib(this.Ua,"bytes_sent",t.length),t=Ic(t),t=db(t,!0),t=Vc(t,1840);for(var e=0;t.length>e;e++){var n=this.Sa;n.Yc.push({Gg:this.bf,Og:t.length,df:t[e]}),n.he&&Wg(n),this.bf++}},Tg.prototype.close=function(){if(this.he=!1,this.Cd){this.Cd.Ug.body.innerHTML="";var t=this;setTimeout(function(){null!==t.Cd&&(document.body.removeChild(t.Cd),t.Cd=null)},Math.floor(0))}if(this.Fe){var e={disconn:"t"};e.id=this.Fe,e.pw=this.sf,e=this.fd(e),Xg(e)}(e=this.gb)&&(this.gb=null,e())};var $g=null,bh=null,bh=require("faye-websocket").Client,dh;ch.prototype.open=function(t,e){this.gb=e,this.rg=t,this.f("Websocket connecting to "+this.Ob),this.Ec=!1,Ac.set("previous_websocket_failure",!0);try{this.va=new bh(this.Ob,[],{headers:{"User-Agent":"Firebase/5/2.2.3/"+process.platform+"/Node"}})}catch(n){this.f("Error instantiating WebSocket.");var a=n.message||n.data;return a&&this.f(a),this.fb(),void 0}var i=this;this.va.onopen=function(){i.f("Websocket connected."),i.Ec=!0},this.va.onclose=function(){i.f("Websocket connection was disconnected."),i.va=null,i.fb()},this.va.onmessage=function(t){if(null!==i.va)if(t=t.data,i.lb+=t.length,Ib(i.Ua,"bytes_received",t.length),eh(i),null!==i.frames)fh(i,t);else{t:{if(I(null===i.frames,"We already have a frame buffer"),6>=t.length){var e=Number(t);if(!isNaN(e)){i.Xe=e,i.frames=[],t=null;break t}}i.Xe=1,i.frames=[]}null!==t&&fh(i,t)}},this.va.onerror=function(t){i.f("WebSocket error.  Closing connection."),(t=t.message||t.data)&&i.f(t),i.fb()}},ch.prototype.start=function(){},ch.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&4.4>parseFloat(e[1])&&(t=!0)}return!t&&null!==bh&&!dh},ch.responsesRequiredToBeHealthy=2,ch.healthyTimeout=3e4,h=ch.prototype,h.Ad=function(){Ac.remove("previous_websocket_failure")},h.send=function(t){eh(this),t=B(t),this.mb+=t.length,Ib(this.Ua,"bytes_sent",t.length),t=Vc(t,16384),t.length>1&&this.va.send(t.length+"");for(var e=0;t.length>e;e++)this.va.send(t[e])},h.bd=function(){this.vb=!0,this.Hc&&(clearInterval(this.Hc),this.Hc=null),this.va&&(this.va.close(),this.va=null)},h.fb=function(){this.vb||(this.f("WebSocket is closing itself"),this.bd(),this.gb&&(this.gb(this.Ec),this.gb=null))},h.close=function(){this.vb||(this.f("WebSocket is being closed"),this.bd())};var ih=[Qg,ch];kh.prototype.Ca=function(t){vh(this,{t:"d",d:t})},kh.prototype.Fd=function(t){sh(this),this.gc(t)},kh.prototype.close=function(){2!==this.Ta&&(this.f("Closing realtime connection."),this.Ta=2,rh(this),this.ka&&(this.ka(),this.ka=null))};var xh=0,zh=0;h=wh.prototype,h.Ca=function(t,e,n){var a=++this.Fg;t={r:a,a:t,b:e},this.f(B(t)),I(this.ma,"sendRequest call when we're not connected not allowed."),this.Ra.Ca(t),n&&(this.$c[a]=n)},h.pf=function(t,e,n,a){var i=t.wa(),s=""+t.path;this.f("Listen called for "+s+" "+i),this.aa[s]=this.aa[s]||{},I(!this.aa[s][i],"listen() called twice for same path/queryId."),t={J:a,td:e,Cg:t,tag:n},this.aa[s][i]=t,this.ma&&Ah(this,t)},h.P=function(t,e,n){this.Ea={cg:t,gf:!1,xc:e,hd:n},this.f("Authenticating using credential: "+t),Ch(this),(e=40==t.length)||(t=Zc(t).zc,e="object"==typeof t&&!0===w(t,"admin")),e&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.Bd=3e4)},h.ce=function(t){delete this.Ea,this.ma&&this.Ca("unauth",{},function(e){t(e.s,e.d)})},h.Kf=function(t,e){var n=""+t.path,a=t.wa();if(this.f("Unlisten called for "+n+" "+a),Bh(this,n,a)&&this.ma){var i=ae(t.n);this.f("Unlisten on "+n+" for "+a),n={p:n},e&&(n.q=i,n.t=e),this.Ca("n",n)}},h.Ie=function(t,e,n){this.ma?Dh(this,"o",t,e,n):this.Sc.push({ic:t,action:"o",data:e,J:n})},h.wf=function(t,e,n){this.ma?Dh(this,"om",t,e,n):this.Sc.push({ic:t,action:"om",data:e,J:n})},h.Gd=function(t,e){this.ma?Dh(this,"oc",t,null,e):this.Sc.push({ic:t,action:"oc",data:null,J:e})},h.put=function(t,e,n,a){Eh(this,"p",t,e,n,a)},h.qf=function(t,e,n,a){Eh(this,"m",t,e,n,a)},h.Bf=function(t){this.ma&&(t={c:t},this.f("reportStats",t),this.Ca("s",t))},h.Fd=function(t){if("r"in t){this.f("from server: "+B(t));var e=t.r,n=this.$c[e];n&&(delete this.$c[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&(e=t.a,n=t.b,this.f("handleServerMessage",e,n),"d"===e?this.Cb(n.p,n.d,!1,n.t):"m"===e?this.Cb(n.p,n.d,!0,n.t):"c"===e?Gh(this,n.p,n.q):"ac"===e?(t=n.s,e=n.d,n=this.Ea,delete this.Ea,n&&n.hd&&n.hd(t,e)):"sd"===e?this.Re?this.Re(n):"msg"in n&&"undefined"!=typeof console&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: ")):Nc("Unrecognized action received from server: "+B(e)+"\nAre you using the latest client?"))}},h.Tc=function(t){this.f("connection ready"),this.ma=!0,this.Ic=(new Date).getTime(),this.Ke({serverTimeOffset:t-(new Date).getTime()}),Hh(this),this.Rc(!0)},h.vg=function(t){t&&!this.tc&&this.Za===this.Bd&&(this.f("Window became visible.  Reducing delay."),this.Za=1e3,this.Ra||yh(this,0)),this.tc=t},h.tg=function(t){t?(this.f("Browser went online.  Reconnecting."),this.Za=1e3,this.Hb=!0,this.Ra||yh(this,0)):(this.f("Browser went offline.  Killing connection; don't reconnect."),this.Hb=!1,this.Ra&&this.Ra.close())},h.xf=function(){this.f("data client disconnected"),this.ma=!1,this.Ra=null;for(var t=0;this.pa.length>t;t++){var e=this.pa[t];e&&"h"in e.Df&&e.Dg&&(e.J&&e.J("disconnect"),delete this.pa[t],this.Wc--)}if(0===this.Wc&&(this.pa=[]),this.Hb)this.tc?this.Ic&&((new Date).getTime()-this.Ic>3e4&&(this.Za=1e3),this.Ic=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Za=this.Bd,this.Be=(new Date).getTime()),t=Math.max(0,this.Za-((new Date).getTime()-this.Be)),t*=Math.random(),this.f("Trying to reconnect in "+t+"ms"),yh(this,t),this.Za=Math.min(this.Bd,1.3*this.Za);else for(var n in this.$c)delete this.$c[n];this.Rc(!1)},h.ub=function(){this.Hb=!1,this.Ra?this.Ra.close():(this.Rb&&(clearTimeout(this.Rb),this.Rb=null),this.ma&&this.xf())},h.pc=function(){this.Hb=!0,this.Za=1e3,this.Ra||yh(this,0)};var V={ig:function(){Rg=dh=!0}};V.forceLongPolling=V.ig,V.jg=function(){Sg=!0},V.forceWebSockets=V.jg,V.Jg=function(t,e){t.k.Qa.Re=e},V.setSecurityDebugCallback=V.Jg,V.Te=function(t,e){t.k.Te(e)},V.stats=V.Te,V.Ue=function(t,e){t.k.Ue(e)},V.statsIncrementCounter=V.Ue,V.od=function(t){return t.k.od},V.dataUpdateCount=V.od,V.mg=function(t,e){t.k.ze=e},V.interceptServerData=V.mg,V.qg=function(t){new qg(t)},V.onPopupOpen=V.qg,V.Hg=function(t){dg=t},V.setAuthenticationServer=V.Hg,R.prototype.K=function(){return y("Firebase.DataSnapshot.val",0,0,arguments.length),this.B.K()},R.prototype.val=R.prototype.K,R.prototype.ff=function(){return y("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.B.K(!0)},R.prototype.exportVal=R.prototype.ff,R.prototype.hg=function(){return y("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.B.e()},R.prototype.exists=R.prototype.hg,R.prototype.w=function(t){y("Firebase.DataSnapshot.child",0,1,arguments.length),ga(t)&&(t+=""),Vf("Firebase.DataSnapshot.child",t);var e=new K(t),n=this.V.w(e);return new R(this.B.oa(e),n,M)},R.prototype.child=R.prototype.w,R.prototype.Ga=function(t){y("Firebase.DataSnapshot.hasChild",1,1,arguments.length),Vf("Firebase.DataSnapshot.hasChild",t);var e=new K(t);return!this.B.oa(e).e()},R.prototype.hasChild=R.prototype.Ga,R.prototype.A=function(){return y("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.B.A().K()},R.prototype.getPriority=R.prototype.A,R.prototype.forEach=function(t){if(y("Firebase.DataSnapshot.forEach",1,1,arguments.length),A("Firebase.DataSnapshot.forEach",1,t,!1),this.B.N())return!1;var e=this;return!!this.B.U(this.g,function(n,a){return t(new R(a,e.V.w(n),M))})},R.prototype.forEach=R.prototype.forEach,R.prototype.sd=function(){return y("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),this.B.N()?!1:!this.B.e()},R.prototype.hasChildren=R.prototype.sd,R.prototype.name=function(){return P("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead."),y("Firebase.DataSnapshot.name",0,0,arguments.length),this.key()},R.prototype.name=R.prototype.name,R.prototype.key=function(){return y("Firebase.DataSnapshot.key",0,0,arguments.length),this.V.key()},R.prototype.key=R.prototype.key,R.prototype.zb=function(){return y("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.B.zb()},R.prototype.numChildren=R.prototype.zb,R.prototype.kc=function(){return y("Firebase.DataSnapshot.ref",0,0,arguments.length),this.V},R.prototype.ref=R.prototype.kc,h=Jh.prototype,h.toString=function(){return(this.H.ib?"https://":"http://")+this.H.host},h.name=function(){return this.H.yb},h.Cb=function(t,e,n,a){this.od++;var i=new K(t);e=this.ze?this.ze(t,e):e,t=[],a?n?(e=na(e,function(t){return L(t)}),t=pf(this.O,i,e,a)):(e=L(e),t=lf(this.O,i,e,a)):n?(a=na(e,function(t){return L(t)}),t=kf(this.O,i,a)):(a=L(e),t=gf(this.O,new Rb(xe,i,a))),a=i,t.length>0&&(a=Nh(this,i)),wb(this.ea,a,t)},h.Rc=function(t){Kh(this,"connected",t),!1===t&&Oh(this)},h.Ke=function(t){var e=this;Wc(t,function(t,n){Kh(e,n,t)})},h.He=function(t){Kh(this,"authenticated",t)},h.Gb=function(t,e,n,a){this.f("set",{path:""+t,value:e,Xg:n});var i=Mh(this);e=L(e,n);var i=pc(e,i),s=this.Ed++,i=ff(this.O,t,i,s,!0);sb(this.ea,i);var r=this;this.ca.put(""+t,e.K(!0),function(e,n){var i="ok"===e;i||P("set at "+t+" failed: "+e),i=jf(r.O,s,!i),wb(r.ea,t,i),Ph(a,e,n)}),i=Qh(this,t),Nh(this,i),wb(this.ea,i,[])},h.update=function(t,e,n){this.f("update",{path:""+t,value:e});var a=!0,i=Mh(this),s={};if(r(e,function(t,e){a=!1;var n=L(t);s[e]=pc(n,i)}),a)yb("update() called with empty data.  Don't do anything."),Ph(n,"ok");else{var l=this.Ed++,c=hf(this.O,t,s,l);sb(this.ea,c);var o=this;this.ca.qf(""+t,e,function(e,a){var i="ok"===e;i||P("update at "+t+" failed: "+e);var i=jf(o.O,l,!i),s=t;i.length>0&&(s=Nh(o,t)),wb(o.ea,s,i),Ph(n,e,a)}),e=Qh(this,t),Nh(this,e),wb(this.ea,t,[])}},h.Gd=function(t,e){var n=this;this.ca.Gd(""+t,function(a,i){"ok"===a&&cg(n.ka,t),Ph(e,a,i)})},h.ub=function(){this.Qa&&this.Qa.ub()},h.pc=function(){this.Qa&&this.Qa.pc()},h.Te=function(t){if("undefined"!=typeof console){t?(this.Wd||(this.Wd=new Fb(this.Ua)),t=this.Wd.get()):t=this.Ua.get();var e,n=Ra(sa(t),function(t,e){return Math.max(e.length,t)},0);for(e in t){for(var a=t[e],i=e.length;n+2>i;i++)e+=" ";console.log(e+a)}}},h.Ue=function(t){Ib(this.Ua,t),this.Mg.If[t]=!0},h.f=function(){var t="";this.Qa&&(t=this.Qa.id+":"),yb(t,arguments)},ca(W),W.prototype.ub=function(){for(var t in this.mc)this.mc[t].ub()},W.prototype.interrupt=W.prototype.ub,W.prototype.pc=function(){for(var t in this.mc)this.mc[t].pc()},W.prototype.resume=W.prototype.pc,W.prototype.re=function(){this.Lf=!0},X.prototype.cancel=function(t){y("Firebase.onDisconnect().cancel",0,1,arguments.length),A("Firebase.onDisconnect().cancel",1,t,!0),this.Zc.Gd(this.qa,t||null)},X.prototype.cancel=X.prototype.cancel,X.prototype.remove=function(t){y("Firebase.onDisconnect().remove",0,1,arguments.length),Wf("Firebase.onDisconnect().remove",this.qa),A("Firebase.onDisconnect().remove",1,t,!0),Rh(this.Zc,this.qa,null,t)},X.prototype.remove=X.prototype.remove,X.prototype.set=function(t,e){y("Firebase.onDisconnect().set",1,2,arguments.length),Wf("Firebase.onDisconnect().set",this.qa),Pf("Firebase.onDisconnect().set",t,this.qa,!1),A("Firebase.onDisconnect().set",2,e,!0),Rh(this.Zc,this.qa,t,e)},X.prototype.set=X.prototype.set,X.prototype.Gb=function(t,e,n){y("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),Wf("Firebase.onDisconnect().setWithPriority",this.qa),Pf("Firebase.onDisconnect().setWithPriority",t,this.qa,!1),Sf("Firebase.onDisconnect().setWithPriority",2,e),A("Firebase.onDisconnect().setWithPriority",3,n,!0),Sh(this.Zc,this.qa,t,e,n)},X.prototype.setWithPriority=X.prototype.Gb,X.prototype.update=function(t,e){if(y("Firebase.onDisconnect().update",1,2,arguments.length),Wf("Firebase.onDisconnect().update",this.qa),ea(t)){for(var n={},a=0;t.length>a;++a)n[""+a]=t[a];t=n,P("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rf("Firebase.onDisconnect().update",t,this.qa),A("Firebase.onDisconnect().update",2,e,!0),Th(this.Zc,this.qa,t,e)},X.prototype.update=X.prototype.update,Y.prototype.kc=function(){return y("Query.ref",0,0,arguments.length),new T(this.k,this.path)},Y.prototype.ref=Y.prototype.kc,Y.prototype.Ab=function(t,e,n,a){y("Query.on",2,4,arguments.length),Tf("Query.on",t,!1),A("Query.on",2,e,!1);var i=gi("Query.on",n,a);if("value"===t)Uh(this.k,this,new hd(e,i.cancel||null,i.La||null));else{var s={};s[t]=e,Uh(this.k,this,new id(s,i.cancel,i.La))}return e},Y.prototype.on=Y.prototype.Ab,Y.prototype.fc=function(t,e,n){y("Query.off",0,3,arguments.length),Tf("Query.off",t,!0),A("Query.off",2,e,!0),ib("Query.off",3,n);var a=null,i=null;"value"===t?a=new hd(e||null,null,n||null):t&&(e&&(i={},i[t]=e),a=new id(i,null,n||null)),i=this.k,a=".info"===O(this.path)?i.yd.hb(this,a):i.O.hb(this,a),ub(i.ea,this.path,a)},Y.prototype.off=Y.prototype.fc,Y.prototype.wg=function(t,e){function n(r){s&&(s=!1,i.fc(t,n),e.call(a.La,r))}y("Query.once",2,4,arguments.length),Tf("Query.once",t,!1),A("Query.once",2,e,!1);var a=gi("Query.once",arguments[2],arguments[3]),i=this,s=!0;this.Ab(t,n,function(e){i.fc(t,n),a.cancel&&a.cancel.call(a.La,e)})},Y.prototype.once=Y.prototype.wg,Y.prototype.Ce=function(t){if(P("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead."),y("Query.limit",1,1,arguments.length),!ga(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limit: First argument must be a positive integer.");if(this.n.ia)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var e=this.n.Ce(t);return ei(e),new Y(this.k,this.path,e,this.hc)},Y.prototype.limit=Y.prototype.Ce,Y.prototype.De=function(t){if(y("Query.limitToFirst",1,1,arguments.length),!ga(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.n.ia)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.De(t),this.hc)},Y.prototype.limitToFirst=Y.prototype.De,Y.prototype.Ee=function(t){if(y("Query.limitToLast",1,1,arguments.length),!ga(t)||Math.floor(t)!==t||0>=t)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.n.ia)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Ee(t),this.hc)},Y.prototype.limitToLast=Y.prototype.Ee,Y.prototype.xg=function(t){if(y("Query.orderByChild",1,1,arguments.length),"$key"===t)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Uf("Query.orderByChild",1,t,!1),fi(this,"Query.orderByChild");var e=$d(this.n,new Pd(t));return di(e),new Y(this.k,this.path,e,!0)},Y.prototype.orderByChild=Y.prototype.xg,Y.prototype.yg=function(){y("Query.orderByKey",0,0,arguments.length),fi(this,"Query.orderByKey");var t=$d(this.n,Td);return di(t),new Y(this.k,this.path,t,!0)},Y.prototype.orderByKey=Y.prototype.yg,Y.prototype.zg=function(){y("Query.orderByPriority",0,0,arguments.length),fi(this,"Query.orderByPriority");var t=$d(this.n,M);return di(t),new Y(this.k,this.path,t,!0)},Y.prototype.orderByPriority=Y.prototype.zg,Y.prototype.Ag=function(){y("Query.orderByValue",0,0,arguments.length),fi(this,"Query.orderByValue");var t=$d(this.n,Wd);return di(t),new Y(this.k,this.path,t,!0)},Y.prototype.orderByValue=Y.prototype.Ag,Y.prototype.Vd=function(t,e){y("Query.startAt",0,2,arguments.length),Pf("Query.startAt",t,this.path,!0),Uf("Query.startAt",2,e,!0);var a=this.n.Vd(t,e);if(ei(a),di(a),this.n.la)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return n(t)||(e=t=null),new Y(this.k,this.path,a,this.hc)},Y.prototype.startAt=Y.prototype.Vd,Y.prototype.pd=function(t,e){y("Query.endAt",0,2,arguments.length),Pf("Query.endAt",t,this.path,!0),Uf("Query.endAt",2,e,!0);var n=this.n.pd(t,e);if(ei(n),di(n),this.n.na)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Y(this.k,this.path,n,this.hc)},Y.prototype.endAt=Y.prototype.pd,Y.prototype.eg=function(t,e){if(y("Query.equalTo",1,2,arguments.length),Pf("Query.equalTo",t,this.path,!1),Uf("Query.equalTo",2,e,!0),this.n.la)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.n.na)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Vd(t,e).pd(t,e)},Y.prototype.equalTo=Y.prototype.eg,Y.prototype.toString=function(){y("Query.toString",0,0,arguments.length);for(var t=this.path,e="",n=t.Y;t.o.length>n;n++)""!==t.o[n]&&(e+="/"+encodeURIComponent(t.o[n]+""));return t=""+this.k+(e||"/"),e=gb(ce(this.n)),t+=e.replace(/^&/,"")},Y.prototype.toString=Y.prototype.toString,Y.prototype.wa=function(){var t=Uc(ae(this.n));return"{}"===t?"default":t};var Z={};Z.uc=wh,Z.DataConnection=Z.uc,wh.prototype.Lg=function(t,e){this.Ca("q",{p:t},e)},Z.uc.prototype.simpleListen=Z.uc.prototype.Lg,wh.prototype.dg=function(t,e){this.Ca("echo",{d:t},e)},Z.uc.prototype.echo=Z.uc.prototype.dg,wh.prototype.interrupt=wh.prototype.ub,Z.Of=kh,Z.RealTimeConnection=Z.Of,kh.prototype.sendRequest=kh.prototype.Ca,kh.prototype.close=kh.prototype.close,Z.lg=function(t){var e=wh.prototype.put;return wh.prototype.put=function(a,i,s,r){n(r)&&(r=t()),e.call(this,a,i,s,r)},function(){wh.prototype.put=e}},Z.hijackHash=Z.lg,Z.Nf=Cc,Z.ConnectionTarget=Z.Nf,Z.wa=function(t){return t.wa()},Z.queryIdentifier=Z.wa,Z.ng=function(t){return t.k.Qa.aa},Z.listens=Z.ng,Z.re=function(t){t.re()},Z.forceRestClient=Z.re,ma(T,Y);var hi=T,ii=["Firebase"],ji=aa;ii[0]in ji||!ji.execScript||ji.execScript("var "+ii[0]);for(var ki;ii.length&&(ki=ii.shift());)!ii.length&&n(hi)?ji[ki]=hi:ji=ji[ki]?ji[ki]:ji[ki]={};module.exports=T,T.prototype.name=function(){return P("Firebase.name() being deprecated. Please use Firebase.key() instead."),y("Firebase.name",0,0,arguments.length),this.key()},T.prototype.name=T.prototype.name,T.prototype.key=function(){return y("Firebase.key",0,0,arguments.length),this.path.e()?null:sc(this.path)},T.prototype.key=T.prototype.key,T.prototype.w=function(t){if(y("Firebase.child",1,1,arguments.length),ga(t))t+="";else if(!(t instanceof K))if(null===O(this.path)){var e=t;e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Vf("Firebase.child",e)}else Vf("Firebase.child",t);return new T(this.k,this.path.w(t))},T.prototype.child=T.prototype.w,T.prototype.parent=function(){y("Firebase.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new T(this.k,t)},T.prototype.parent=T.prototype.parent,T.prototype.root=function(){y("Firebase.ref",0,0,arguments.length);for(var t=this;null!==t.parent();)t=t.parent();return t},T.prototype.root=T.prototype.root,T.prototype.set=function(t,e){y("Firebase.set",1,2,arguments.length),Wf("Firebase.set",this.path),Pf("Firebase.set",t,this.path,!1),A("Firebase.set",2,e,!0),this.k.Gb(this.path,t,null,e||null)},T.prototype.set=T.prototype.set,T.prototype.update=function(t,e){if(y("Firebase.update",1,2,arguments.length),Wf("Firebase.update",this.path),ea(t)){for(var n={},a=0;t.length>a;++a)n[""+a]=t[a];t=n,P("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rf("Firebase.update",t,this.path),A("Firebase.update",2,e,!0),this.k.update(this.path,t,e||null)},T.prototype.update=T.prototype.update,T.prototype.Gb=function(t,e,n){if(y("Firebase.setWithPriority",2,3,arguments.length),Wf("Firebase.setWithPriority",this.path),Pf("Firebase.setWithPriority",t,this.path,!1),Sf("Firebase.setWithPriority",2,e),A("Firebase.setWithPriority",3,n,!0),".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";this.k.Gb(this.path,t,e,n||null)},T.prototype.setWithPriority=T.prototype.Gb,T.prototype.remove=function(t){y("Firebase.remove",0,1,arguments.length),Wf("Firebase.remove",this.path),A("Firebase.remove",1,t,!0),this.set(null,t)},T.prototype.remove=T.prototype.remove,T.prototype.transaction=function(t,e,a){if(y("Firebase.transaction",1,3,arguments.length),Wf("Firebase.transaction",this.path),A("Firebase.transaction",1,t,!1),A("Firebase.transaction",2,e,!0),n(a)&&"boolean"!=typeof a)throw Error(z("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";a===void 0&&(a=!0),Vh(this.k,this.path,t,e||null,a)},T.prototype.transaction=T.prototype.transaction,T.prototype.Ig=function(t,e){y("Firebase.setPriority",1,2,arguments.length),Wf("Firebase.setPriority",this.path),Sf("Firebase.setPriority",1,t),A("Firebase.setPriority",2,e,!0),this.k.Gb(this.path.w(".priority"),t,null,e)},T.prototype.setPriority=T.prototype.Ig,T.prototype.push=function(t,e){y("Firebase.push",0,2,arguments.length),Wf("Firebase.push",this.path),Pf("Firebase.push",t,this.path,!0),A("Firebase.push",2,e,!0);var n=Lh(this.k),n=If(n),n=this.w(n);return t!==void 0&&null!==t&&n.set(t,e),n},T.prototype.push=T.prototype.push,T.prototype.gb=function(){return Wf("Firebase.onDisconnect",this.path),new X(this.k,this.path)},T.prototype.onDisconnect=T.prototype.gb,T.prototype.P=function(t,e,n){P("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."),y("Firebase.auth",1,3,arguments.length),Xf("Firebase.auth",t),A("Firebase.auth",2,e,!0),A("Firebase.auth",3,e,!0),Gg(this.k.P,t,{},{remember:"none"},e,n)},T.prototype.auth=T.prototype.P,T.prototype.ce=function(t){y("Firebase.unauth",0,1,arguments.length),A("Firebase.unauth",1,t,!0),Hg(this.k.P,t)},T.prototype.unauth=T.prototype.ce,T.prototype.te=function(){return y("Firebase.getAuth",0,0,arguments.length),this.k.P.te()},T.prototype.getAuth=T.prototype.te,T.prototype.pg=function(t,e){y("Firebase.onAuth",1,2,arguments.length),A("Firebase.onAuth",1,t,!1),ib("Firebase.onAuth",2,e),this.k.P.Ab("auth_status",t,e)},T.prototype.onAuth=T.prototype.pg,T.prototype.og=function(t,e){y("Firebase.offAuth",1,2,arguments.length),A("Firebase.offAuth",1,t,!1),ib("Firebase.offAuth",2,e),this.k.P.fc("auth_status",t,e)},T.prototype.offAuth=T.prototype.og,T.prototype.Sf=function(t,e,n){y("Firebase.authWithCustomToken",2,3,arguments.length),Xf("Firebase.authWithCustomToken",t),A("Firebase.authWithCustomToken",2,e,!1),Zf("Firebase.authWithCustomToken",3,n,!0),Gg(this.k.P,t,{},n||{},e)},T.prototype.authWithCustomToken=T.prototype.Sf,T.prototype.Tf=function(t,e,n){y("Firebase.authWithOAuthPopup",2,3,arguments.length),Yf("Firebase.authWithOAuthPopup",1,t),A("Firebase.authWithOAuthPopup",2,e,!1),Zf("Firebase.authWithOAuthPopup",3,n,!0),Lg(this.k.P,t,n,e)},T.prototype.authWithOAuthPopup=T.prototype.Tf,T.prototype.Uf=function(t,e,n){y("Firebase.authWithOAuthRedirect",2,3,arguments.length),Yf("Firebase.authWithOAuthRedirect",1,t),A("Firebase.authWithOAuthRedirect",2,e,!1),Zf("Firebase.authWithOAuthRedirect",3,n,!0);var a=this.k.P;Jg(a);var i=[sg],s=gg(n);"anonymous"===t||"firebase"===t?Q(e,U("TRANSPORT_UNAVAILABLE")):(Bc.set("redirect_client_options",s.kd),Kg(a,i,"/auth/"+t,s,e))},T.prototype.authWithOAuthRedirect=T.prototype.Uf,T.prototype.Vf=function(t,e,n,a){y("Firebase.authWithOAuthToken",3,4,arguments.length),Yf("Firebase.authWithOAuthToken",1,t),A("Firebase.authWithOAuthToken",3,n,!1),Zf("Firebase.authWithOAuthToken",4,a,!0),p(e)?(Yf("Firebase.authWithOAuthToken",2,e),Ig(this.k.P,t+"/token",{access_token:e},a,n)):(Zf("Firebase.authWithOAuthToken",2,e,!1),Ig(this.k.P,t+"/token",e,a,n))},T.prototype.authWithOAuthToken=T.prototype.Vf,T.prototype.Rf=function(t,e){y("Firebase.authAnonymously",1,2,arguments.length),A("Firebase.authAnonymously",1,t,!1),Zf("Firebase.authAnonymously",2,e,!0),Ig(this.k.P,"anonymous",{},e,t)
},T.prototype.authAnonymously=T.prototype.Rf,T.prototype.Wf=function(t,e,n){y("Firebase.authWithPassword",2,3,arguments.length),Zf("Firebase.authWithPassword",1,t,!1),$f("Firebase.authWithPassword",t,"email"),$f("Firebase.authWithPassword",t,"password"),A("Firebase.authAnonymously",2,e,!1),Zf("Firebase.authAnonymously",3,n,!0),Ig(this.k.P,"password",t,n,e)},T.prototype.authWithPassword=T.prototype.Wf,T.prototype.oe=function(t,e){y("Firebase.createUser",2,2,arguments.length),Zf("Firebase.createUser",1,t,!1),$f("Firebase.createUser",t,"email"),$f("Firebase.createUser",t,"password"),A("Firebase.createUser",2,e,!1),this.k.P.oe(t,e)},T.prototype.createUser=T.prototype.oe,T.prototype.Oe=function(t,e){y("Firebase.removeUser",2,2,arguments.length),Zf("Firebase.removeUser",1,t,!1),$f("Firebase.removeUser",t,"email"),$f("Firebase.removeUser",t,"password"),A("Firebase.removeUser",2,e,!1),this.k.P.Oe(t,e)},T.prototype.removeUser=T.prototype.Oe,T.prototype.le=function(t,e){y("Firebase.changePassword",2,2,arguments.length),Zf("Firebase.changePassword",1,t,!1),$f("Firebase.changePassword",t,"email"),$f("Firebase.changePassword",t,"oldPassword"),$f("Firebase.changePassword",t,"newPassword"),A("Firebase.changePassword",2,e,!1),this.k.P.le(t,e)},T.prototype.changePassword=T.prototype.le,T.prototype.ke=function(t,e){y("Firebase.changeEmail",2,2,arguments.length),Zf("Firebase.changeEmail",1,t,!1),$f("Firebase.changeEmail",t,"oldEmail"),$f("Firebase.changeEmail",t,"newEmail"),$f("Firebase.changeEmail",t,"password"),A("Firebase.changeEmail",2,e,!1),this.k.P.ke(t,e)},T.prototype.changeEmail=T.prototype.ke,T.prototype.Pe=function(t,e){y("Firebase.resetPassword",2,2,arguments.length),Zf("Firebase.resetPassword",1,t,!1),$f("Firebase.resetPassword",t,"email"),A("Firebase.resetPassword",2,e,!1),this.k.P.Pe(t,e)},T.prototype.resetPassword=T.prototype.Pe,T.goOffline=function(){y("Firebase.goOffline",0,0,arguments.length),W.Vb().ub()},T.goOnline=function(){y("Firebase.goOnline",0,0,arguments.length),W.Vb().pc()},T.enableLogging=Lc,T.ServerValue={TIMESTAMP:{".sv":"timestamp"}},T.SDK_VERSION="2.2.3",T.INTERNAL=V,T.Context=W,T.TEST_ACCESS=Z}});