montageDefine("b52e2a0","core/meta/object-property",{dependencies:["../core","../exception","./blueprint","../logger"],factory:function(t,e){"use strict";var n=t("../core").Montage,i=t("../exception").Exception;t("./blueprint").Blueprint;var r=t("./blueprint").Binder,a=t("../logger").logger("object-property");e.ObjectProperty=n.specialize({constructor:{value:function(){this.superForValue("constructor")()}},init:{serializable:!1,enumerable:!1,value:function(){return this}},apply:{value:function(t,e){if(!t.hasOwnProperty("blueprint")){var i;i=n.getInfoForObject(t),null!=i&&i.isInstance===!1&&(e===void 0?e=r.manager.blueprintForPrototype(i.objectName,i.moduleId):(e.prototypeName!==i.objectName||e.moduleId!==i.moduleId)&&(e=null),this.applyWithBlueprint(t,e))}}},applyWithBlueprint:{value:function(t,e){null!=e&&(this.addProperties(t,e),null!==e.parent&&this.apply(Object.getPrototypeOf(t),e))}},addProperties:{value:function(t,e){for(var i,r=0;i=e.propertyBlueprints[r++];)i.isDerived?this.addDerivedProperty(t,i):i.isAssociation?this.addAssociation(t,i):this.addProperty(t,i);n.defineProperty(t,"_blueprint",{serializable:!1,enumerable:!1,value:e}),n.defineProperty(t,"blueprint",{enumerable:!1,serializable:!1,get:function(){return this._blueprint}}),n.defineProperty(t,"blueprintGet",{serializable:!1,enumerable:!1,value:this.blueprintGet}),n.defineProperty(t,"blueprintSet",{serializable:!1,enumerable:!1,value:this.blueprintSet})}},addProperty:{value:function(t,e){this.addPropertyStorage(t,e),this.addPropertyDefinition(t,e),this.addPropertyStoredValue(t,e)}},addPropertyStorage:{value:function(t,e){var i="_"+e.name,r=null;t.hasOwnProperty(i)?a.isError&&a.error("We have an issue here. The developer should not override the storage value for "+i+"."):(r=e.isToMany?{value:[],enumerable:!1,serializable:!0,distinct:!0}:{value:null,enumerable:!1,serializable:!0},n.defineProperty(t,i,r))}},addPropertyDefinition:{value:function(t,e){var i=e.name,r=null;t.hasOwnProperty(i)?a.isDebug&&a.debug("The developer has already created the property "+i+" method do nothing."):(r={get:function(){return this.blueprintGet(i)},enumerable:!0,serializable:!1},e.readOnly||(r.set=function(t){return this.blueprintSet(i,t)}),n.defineProperty(t,i,r))}},blueprintGet:{value:function(t){var e=this.blueprint.propertyBlueprintForName(t),n="_"+e.name;return this[n]},enumerable:!1,serializable:!1},blueprintSet:{value:function(t,e){var n=this.blueprint.propertyBlueprintForName(t),r="_"+n.name;if(null==e&&n.denyDelete)throw(new i).initWithMessageTargetAndMethod("Deny Delete",this,n.name);this[r]=e},enumerable:!1,serializable:!1},addPropertyStoredValue:{value:function(t,e){var i=e.name+"$Storage",r=null;t.hasOwnProperty(i)?a.isError&&a.error("We have an issue here. The developer should not override the stored value for "+i+"."):(r=e.isToMany?{value:[],enumerable:!1,serializable:!1,distinct:!0}:{value:null,enumerable:!1,serializable:!1},n.defineProperty(t,i,r))}},addAssociation:{value:function(t,e){this.addPropertyStorage(t,e),this.addAssociationDefinition(t,e),this.addPropertyStoredValue(t,e)}},addAssociationDefinition:{value:function(t,e){e.isToMany?this.addToManyAssociationDefinition(t,e):this.addToOneAssociationDefinition(t,e)}},addToOneAssociationDefinition:{value:function(t,e){var i=e.name.toCapitalized(),r="addTo"+i;t.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="removeFrom"+i,t.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="clear"+i,t.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}})}},addToManyAssociationDefinition:{value:function(t,e){var i=e.name.toCapitalized(),r="addTo"+i;t.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="removeFrom"+i,t.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}}),r="clear"+i,t.hasOwnProperty(r)?a.isError&&a.error("We have an issue here. The developer should not override the method "+r+"."):n.defineProperty(t,r,{serializable:!1,enumerable:!1,value:function(){return null}})}},addDerivedProperty:{value:function(){}}})}});