var Montage=require("../../core/core").Montage,AbstractControl=require("./abstract-control").AbstractControl,KeyComposer=require("../../composer/key-composer").KeyComposer,Dict=require("collections/dict"),CLASS_PREFIX="montage-TextField",AbstractTextField=exports.AbstractTextField=AbstractControl.specialize({constructor:{value:function AbstractTextField(){if(this.constructor===AbstractTextField)throw Error("AbstractTextField cannot be instantiated.");AbstractControl.constructor.call(this),this._keyComposer=new KeyComposer,this._keyComposer.component=this,this._keyComposer.keys="enter",this.addComposer(this._keyComposer),this.defineBindings({"classList.has('montage--disabled')":{"<-":"!enabled"}})}},hasTemplate:{value:!1},acceptsActiveTarget:{get:function(){var t=this.callDelegateMethod("shouldBeginEditing",this);return t!==!1}},delegate:{value:null},enabled:{value:!0},_placeholderValue:{value:null},placeholderValue:{set:function(t){this._placeholderValue=t,this.needsDraw=!0},get:function(){return this._placeholderValue}},_value:{value:null},value:{set:function(t){t!==this._value&&(!this.hasFocus||this.callDelegateMethod("shouldAcceptValue",this,t))&&(this._value=t,this.needsDraw=!0)},get:function(){return this._value}},_hasFocus:{value:!1},hasFocus:{get:function(){return this._hasFocus}},_keyComposer:{value:null},handleKeyPress:{value:function(t){this.enabled&&t.keyComposer===this._keyComposer&&this.dispatchActionEvent()}},prepareForActivationEvents:{value:function(){this._keyComposer.addEventListener("keyPress",this,!1)}},enterDocument:{value:function(t){t&&(this.element.addEventListener("input",this,!1),this.element.addEventListener("change",this,!1))}},draw:{value:function(){var t=this.value;this.element.value=null===t||t===void 0?"":"boolean"==typeof t||"object"==typeof t||"number"==typeof t?""+t:t,null!=this.placeholderValue&&this.element.setAttribute("placeholder",this.placeholderValue)}},handleChange:{value:function(){this._updateValueFromDom()}},handleInput:{value:function(){this._updateValueFromDom()}},willBecomeActiveTarget:{value:function(){this._hasFocus=!0,this.callDelegateMethod("didBeginEditing",this)}},surrendersActiveTarget:{value:function(){var t=this.callDelegateMethod("shouldEndEditing",this);return t===!1?!1:(this._hasFocus=!1,this.callDelegateMethod("didEndEditing",this),!0)}},_updateValueFromDom:{value:function(){this._value!==this.element.value&&(this._value=this.element.value,this.dispatchOwnPropertyChange("value",this._value),this.callDelegateMethod("didChange",this))}}});