montageDefine("e19c942","fs-root",{dependencies:["q","./fs-boot","./fs-common"],factory:function(e,t,n){function i(e,t){function n(n){var i;return i=e.isAbsolute(n)?e.relativeFromDirectory(e.ROOT,n):n,i=e.join(e.ROOT,i),i=e.relativeFromDirectory(e.ROOT,i),i=e.join(t,i),e.canonical(i).then(function(e){return e},function(){return i}).then(function(i){return e.contains(t,i)?{inner:e.join(e.ROOT,e.relativeFromDirectory(t,i)),outer:i}:r.reject("Can't find: "+JSON.stringify(n))})}function i(){return e.ROOT}var s=Object.create(a);return o.update(s,i),s.list=function(t){return n(t).then(function(t){return e.list(t.outer)}).then(null,function(){return r.reject("Can't list "+JSON.stringify(t))})},s.open=function(t,i,a){return n(t).then(function(t){return e.open(t.outer,i,a)}).then(null,function(){return r.reject("Can't open "+JSON.stringify(t))})},s.stat=function(t){return n(t).then(function(t){return e.stat(t.outer)}).then(null,function(){return r.reject("Can't stat "+JSON.stringify(t))})},s.statLink=function(t){return n(t).then(function(t){return e.statLink(t.outer)}).then(null,function(){return r.reject("Can't statLink "+JSON.stringify(t))})},s.canonical=function(e){return n(e).then(function(e){return e.inner}).then(null,function(){return r.reject("Can't find canonical of "+JSON.stringify(e))})},s.makeDirectory=function(t){return n(t).then(function(t){return e.makeDirectory(t.outer)}).catch(function(){throw Error("Can't make directory "+JSON.stringify(t))})},s.removeDirectory=function(t){return n(t).then(function(t){return e.removeDirectory(t.outer)}).catch(function(){throw Error("Can't remove directory "+JSON.stringify(t))})},s.remove=function(t){return n(t).then(function(t){return e.remove(t.outer)}).catch(function(){throw Error("Can't remove "+JSON.stringify(t))})},s.makeTree=function(t){return n(t).then(function(t){return e.makeTree(t.outer)}).catch(function(){throw Error("Can't make tree "+JSON.stringify(t))})},s.removeTree=function(t){return n(t).then(function(t){return e.removeTree(t.outer)}).catch(function(){throw Error("Can't remove tree "+JSON.stringify(t))})},r.when(e.canonical(t),function(e){return t=e,s})}var r=e("q"),a=e("./fs-boot"),o=e("./fs-common");n.exports=i}});