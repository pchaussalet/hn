montageDefine("89c58a0","lib/websocket/driver/hybi/stream_reader",{dependencies:[],factory:function(e,t,n){"use strict";var r=function(){this._queue=[],this._queueSize=0};r.prototype.put=function(e){e&&0!==e.length&&(e.copy||(e=new Buffer(e)),this._queue.push(e),this._queueSize+=e.length)},r.prototype.read=function(e){if(e>this._queueSize)return null;if(0===e)return new Buffer(0);var t,n=this._queue,r=n[0];if(r.length>=e)return this._queueSize-=e,r.length===e?n.shift():(t=r.slice(0,e),n[0]=r.slice(e),t);for(var i,a=e,o=0,s=n.length;s>o&&!(n[o].length>a);o++)a-=n[o].length;return i=n.splice(0,o),a>0&&n.length>0&&(i.push(n[0].slice(0,a)),n[0]=n[0].slice(a)),this._queueSize-=e,this._concat(i,e)},r.prototype._concat=function(e,t){if(Buffer.concat)return Buffer.concat(e,t);for(var n=new Buffer(t),r=0,i=0,a=e.length;a>i;i++)e[i].copy(n,r),r+=e[i].length;return n},n.exports=r}});