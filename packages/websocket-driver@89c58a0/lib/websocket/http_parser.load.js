montageDefine("89c58a0","lib/websocket/http_parser",{dependencies:[],factory:function(e,t,n){"use strict";var r=process.binding("http_parser").HTTPParser,i=r.RESPONSE?6:4,a=function(e){this._parser="request"===e?new r(r.REQUEST||"request"):new r(r.RESPONSE||"response"),this._type=e,this._complete=!1,this.headers={};var t=null,n=this;this._parser.onHeaderField=function(e,n,r){t=e.toString("utf8",n,n+r).toLowerCase()},this._parser.onHeaderValue=function(e,r,i){var a=e.toString("utf8",r,r+i);n.headers.hasOwnProperty(t)?n.headers[t]+=", "+a:n.headers[t]=a},this._parser.onHeadersComplete=this._parser[r.kOnHeadersComplete]=function(e,t,r,i,o,s){var l=arguments[0];if("object"==typeof l&&(i=l.method,o=l.url,s=l.statusCode,r=l.headers),n.method="number"==typeof i?a.METHODS[i]:i,n.statusCode=s,n.url=o,r){for(var c,u,h=0,d=r.length;d>h;h+=2)c=r[h].toLowerCase(),u=r[h+1],n.headers.hasOwnProperty(c)?n.headers[c]+=", "+u:n.headers[c]=u;n._complete=!0}}};a.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"REPORT",17:"MKACTIVITY",18:"CHECKOUT",19:"MERGE",24:"PATCH"},a.prototype.isComplete=function(){return this._complete},a.prototype.parse=function(e){var t=6>i?1:0,n=this._parser.execute(e,0,e.length)+t;this._complete&&(this.body=e.length>n?e.slice(n):new Buffer(0))},n.exports=a}});