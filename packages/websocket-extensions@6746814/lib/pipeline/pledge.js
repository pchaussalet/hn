"use strict";var RingBuffer=require("./ring_buffer"),Pledge=function(){this._complete=!1,this._callbacks=new RingBuffer(Pledge.QUEUE_SIZE)};Pledge.QUEUE_SIZE=4,Pledge.all=function(e){var t=new Pledge,n=e.length,i=n;for(0===n&&t.done();i--;)e[i].then(function(){n-=1,0===n&&t.done()});return t},Pledge.prototype.then=function(e){this._complete?e():this._callbacks.push(e)},Pledge.prototype.done=function(){this._complete=!0;for(var e,t=this._callbacks;e=t.shift();)e()},module.exports=Pledge;