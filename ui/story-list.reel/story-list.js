var Component=require("montage/ui/component").Component,Firebase=require("firebase"),TimeAgoConverter=require("lib/time-ago-converter").TimeAgoConverter;exports.StoryList=Component.specialize({constructor:{value:function(){this.super()}},loadNextStories:{value:function(){var e=new Firebase("https://hacker-news.firebaseio.com/v0/topstories"),t=this,n=e.on("value",function(i){var o=[];i.val().slice(t.subs.length,t.subs.length+50).forEach(function(e){var t=new Firebase("https://hacker-news.firebaseio.com/v0/item/"+e);(function(e){o.push(new Promise(function(t){var n=e.on("value",function(i){t(i.val()),e.off("value",n)})}))})(t)}),Promise.all(o).then(function(i){i.forEach(function(e){t.subs.push(e)}),e.off("value",n)})})}},templateDidLoad:{value:function(){this.loadNextStories()}},time_ago_converter:{value:new TimeAgoConverter},subs:{value:[]},handleClick:{value:function(e){e.target.component&&"story-more-link"===e.target.component.identifier&&(this.loadNextStories(),e.stopPropagation(),e.preventDefault())}},enterDocument:{value:function(e){e&&this.element.addEventListener("click",this,!1)}}});